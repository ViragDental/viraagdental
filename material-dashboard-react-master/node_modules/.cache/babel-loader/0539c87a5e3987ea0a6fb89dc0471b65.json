{"ast":null,"code":"import _regeneratorRuntime from \"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\projects\\\\Cricket\\\\akshu close\\\\IPL\\\\material-dashboard-react-master\\\\src\\\\views\\\\Captain\\\\Captain.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport axios from \"axios\";\nimport { makeStyles } from '@material-ui/core/styles'; // import { Switch, Route, Link } from 'react-router-dom';\n\nimport Button from '@material-ui/core/Button';\nimport Table from \"components/Table/Table.js\";\nimport Typography from '@material-ui/core/Typography'; // import TableRow from '@material-ui/core/TableRow';\n// import TableCell from '@material-ui/core/TableCell';\n\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Radio from '@material-ui/core/Radio'; // import Grid from \"@material-ui/core/Grid\";\n// import GridItem from \"components/Grid/GridItem.js\";\n// import Card from \"components/Card/Card.js\";\n// import CardBody from \"components/Card/CardBody.js\";\n\nimport { UserContext } from \"../../UserContext\";\nimport { NoGroup, DisplayPageHeader } from 'CustomComponents/CustomComponents.js';\nimport { hasGroup } from 'views/functions';\nimport red from '@material-ui/core/colors/red';\nimport { updateLanguageServiceSourceFile } from 'typescript';\nvar vcPrefix = \"vicecaptain-\";\nvar cPrefix = \"captain-\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      width: '100%'\n    },\n    captain: {\n      color: \"yellow\"\n    },\n    heading: {\n      fontSize: theme.typography.pxToRem(15),\n      flexBasis: '33.33%',\n      flexShrink: 0\n    },\n    secondaryHeading: {\n      fontSize: theme.typography.pxToRem(15),\n      color: theme.palette.text.secondary\n    },\n    error: {\n      // right: 0,\n      fontSize: '12px',\n      color: red[700],\n      // position: 'absolute',\n      alignItems: 'center',\n      marginTop: '0px'\n    },\n    hdrText: {\n      // right: 0,\n      // fontSize: '12px',\n      // color: red[700],\n      // // position: 'absolute',\n      align: 'center',\n      marginTop: '0px',\n      marginBottom: '0px'\n    }\n  };\n});\nexport default function Group() {\n  _s();\n\n  window.onbeforeunload = function () {\n    return setUser(null);\n  };\n\n  var _useContext = useContext(UserContext),\n      setUser = _useContext.setUser;\n\n  var classes = useStyles();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedViceCaptain = _useState2[0],\n      SetSelectedViceCaptain = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedCaptain = _useState4[0],\n      SetSelectedCaptain = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      myTeamTableData = _useState6[0],\n      setMyTeamTableData = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      tournamentStated = _useState8[0],\n      setTournamentStarted = _useState8[1];\n\n  useEffect(function () {\n    var a = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var gameStarted, mygroup, response, myUrl, teamResponse;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (hasGroup()) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                // console.log(\"Calling getcaptain\")\n                // get start of tournamnet (i.e. start of 1st match)\n                gameStarted = false;\n                mygroup = localStorage.getItem(\"gid\");\n                _context.next = 6;\n                return axios.get(\"/user/getcaptain/\".concat(mygroup, \"/\").concat(localStorage.getItem(\"uid\")));\n\n              case 6:\n                response = _context.sent;\n\n                // console.log(response.data[0]);\n                if (response.data.length > 0) {\n                  SetSelectedCaptain(response.data[0].captainName);\n                  SetSelectedViceCaptain(response.data[0].viceCaptainName);\n                } // get list of player purchased by user for aelecting captain / vice captain\n\n\n                myUrl = \"/user/myteamwos/\".concat(mygroup, \"/\").concat(localStorage.getItem(\"uid\"));\n                _context.next = 11;\n                return axios.get(myUrl);\n\n              case 11:\n                teamResponse = _context.sent;\n                setMyTeamTableData(teamResponse.data[0].players); // console.log(teamResponse.data[0].players) ;\n\n                _context.next = 15;\n                return axios.get(\"/group/gamestarted/\".concat(localStorage.getItem(\"gid\")));\n\n              case 15:\n                response = _context.sent;\n                gameStarted = response.data.length > 0; // gameStarted = false;\n\n                setTournamentStarted(gameStarted);\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function a() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    a();\n  }, []);\n\n  function handleSelectedCaptain(newCap) {\n    if (!tournamentStated) if (newCap !== selectedViceCaptain) SetSelectedCaptain(newCap);\n  }\n\n  ;\n\n  function handleSelectedViceCaptain(newViceCap) {\n    if (!tournamentStated) if (newViceCap !== selectedCaptain) SetSelectedViceCaptain(newViceCap);\n  }\n\n  ;\n\n  function updateCVC(_x) {\n    return _updateCVC.apply(this, arguments);\n  }\n\n  function _updateCVC() {\n    _updateCVC = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(corvc) {\n      var myUrl, resp;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              myUrl = \"\";\n              if (corvc === 'captain') myUrl = \"/user/captain/\".concat(localStorage.getItem(\"gid\"), \"/\").concat(localStorage.getItem(\"uid\"), \"/\").concat(selectedCaptain);else myUrl = \"/user/vicecaptain/\".concat(localStorage.getItem(\"gid\"), \"/\").concat(localStorage.getItem(\"uid\"), \"/\").concat(selectedViceCaptain);\n              console.log(myUrl);\n              _context2.next = 5;\n              return axios.get(myUrl);\n\n            case 5:\n              resp = _context2.sent;\n              return _context2.abrupt(\"return\");\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _updateCVC.apply(this, arguments);\n  }\n\n  function updateCaptain() {\n    console.log(\"upd captin vc details\");\n    updateCVC(\"captain\");\n    updateCVC(\"vicecaptain\");\n  }\n\n  function DisplayCaptainSelectButton() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      size: \"small\",\n      disabled: tournamentStated,\n      className: classes.button,\n      onClick: updateCaptain,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }\n    }, \"Update\"));\n  }\n\n  function ShowCaptainViceCaptain() {\n    var _this = this;\n\n    return /*#__PURE__*/React.createElement(Table, {\n      tableKey: \"t-cvc\",\n      id: \"t-cvc\",\n      size: \"small\",\n      tableHeaderColor: \"warning\",\n      tableHead: [\"Player Name\", \"Captain\", \"Vice Captain\"],\n      tableData: myTeamTableData.map(function (x) {\n        var arr = [x.playerName, /*#__PURE__*/React.createElement(FormControlLabel, {\n          key: cPrefix + x.playerName,\n          id: cPrefix + x.playerName,\n          className: classes.captain,\n          value: x.playerName,\n          control: /*#__PURE__*/React.createElement(Radio, {\n            color: \"primary\",\n            key: cPrefix + x.playerName,\n            id: cPrefix + x.playerName,\n            defaultChecked: x.playerName === selectedCaptain,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 30\n            }\n          }),\n          onClick: function onClick() {\n            return handleSelectedCaptain(x.playerName);\n          },\n          checked: selectedCaptain === x.playerName,\n          disabled: tournamentStated,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 21\n          }\n        }), /*#__PURE__*/React.createElement(FormControlLabel, {\n          key: vcPrefix + x.playerName,\n          id: vcPrefix + x.playerName,\n          className: classes.captain,\n          value: x.playerName,\n          control: /*#__PURE__*/React.createElement(Radio, {\n            color: \"primary\",\n            key: vcPrefix + x.playerName,\n            id: cPrefix + x.playerName,\n            defaultChecked: x.playerName === selectedViceCaptain,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 30\n            }\n          }),\n          onClick: function onClick() {\n            return handleSelectedViceCaptain(x.playerName);\n          },\n          checked: selectedViceCaptain === x.playerName,\n          disabled: tournamentStated,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 21\n          }\n        })];\n        return {\n          data: arr,\n          key: \"pid\",\n          collapse: []\n        };\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }\n    });\n  }\n\n  ;\n\n  function DisplayTournamentStarted() {\n    if (tournamentStated) return /*#__PURE__*/React.createElement(Typography, {\n      className: classes.error,\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    }, \"(cannot update after tournament has started.)\");else return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 20\n      }\n    });\n  }\n\n  if (hasGroup()) return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    key: \"cpataininfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DisplayPageHeader, {\n    headerName: \"Captain/ViceCaptain\",\n    groupName: localStorage.getItem(\"groupName\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(DisplayTournamentStarted, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(ShowCaptainViceCaptain, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(DisplayCaptainSelectButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }));else return /*#__PURE__*/React.createElement(NoGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 16\n    }\n  });\n}\n\n_s(Group, \"11wWvLIYxcbV7r/EtTG4hdSE1WA=\", false, function () {\n  return [useStyles];\n});\n\n_c = Group;\n\nvar _c;\n\n$RefreshReg$(_c, \"Group\");","map":{"version":3,"sources":["D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/src/views/Captain/Captain.js"],"names":["React","useEffect","useState","useContext","axios","makeStyles","Button","Table","Typography","FormControlLabel","Radio","UserContext","NoGroup","DisplayPageHeader","hasGroup","red","updateLanguageServiceSourceFile","vcPrefix","cPrefix","useStyles","theme","root","width","captain","color","heading","fontSize","typography","pxToRem","flexBasis","flexShrink","secondaryHeading","palette","text","secondary","error","alignItems","marginTop","hdrText","align","marginBottom","Group","window","onbeforeunload","setUser","classes","selectedViceCaptain","SetSelectedViceCaptain","selectedCaptain","SetSelectedCaptain","myTeamTableData","setMyTeamTableData","tournamentStated","setTournamentStarted","a","gameStarted","mygroup","localStorage","getItem","get","response","data","length","captainName","viceCaptainName","myUrl","teamResponse","players","handleSelectedCaptain","newCap","handleSelectedViceCaptain","newViceCap","updateCVC","corvc","console","log","resp","updateCaptain","DisplayCaptainSelectButton","button","ShowCaptainViceCaptain","map","x","arr","playerName","key","collapse","DisplayTournamentStarted"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport axios from \"axios\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n// import { Switch, Route, Link } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport Table from \"components/Table/Table.js\";\r\nimport Typography from '@material-ui/core/Typography';\r\n// import TableRow from '@material-ui/core/TableRow';\r\n// import TableCell from '@material-ui/core/TableCell';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Radio from '@material-ui/core/Radio';\r\n// import Grid from \"@material-ui/core/Grid\";\r\n// import GridItem from \"components/Grid/GridItem.js\";\r\n// import Card from \"components/Card/Card.js\";\r\n// import CardBody from \"components/Card/CardBody.js\";\r\nimport { UserContext } from \"../../UserContext\";\r\nimport { NoGroup, DisplayPageHeader } from 'CustomComponents/CustomComponents.js';\r\nimport { hasGroup } from 'views/functions';\r\nimport red from '@material-ui/core/colors/red';\r\nimport { updateLanguageServiceSourceFile } from 'typescript';\r\nconst vcPrefix = \"vicecaptain-\"\r\nconst cPrefix = \"captain-\"\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      width: '100%',\r\n    },\r\n    captain: {\r\n        color: \"yellow\",\r\n    },     \r\n    heading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      flexBasis: '33.33%',\r\n      flexShrink: 0,\r\n    },\r\n    secondaryHeading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      color: theme.palette.text.secondary,\r\n    },\r\n    error:  {\r\n        // right: 0,\r\n        fontSize: '12px',\r\n        color: red[700],\r\n        // position: 'absolute',\r\n        alignItems: 'center',\r\n        marginTop: '0px',\r\n    },\r\n    hdrText:  {\r\n        // right: 0,\r\n        // fontSize: '12px',\r\n        // color: red[700],\r\n        // // position: 'absolute',\r\n        align: 'center',\r\n        marginTop: '0px',\r\n        marginBottom: '0px',\r\n    },\r\n\r\n    }));\r\n\r\n\r\n\r\nexport default function Group() {\r\n\r\n    window.onbeforeunload = () => setUser(null)\r\n    const { setUser } = useContext(UserContext);\r\n    const classes = useStyles();\r\n    const [selectedViceCaptain, SetSelectedViceCaptain] = useState(\"\");\r\n    const [selectedCaptain, SetSelectedCaptain] = useState(\"\");\r\n    const [myTeamTableData, setMyTeamTableData] = useState([]);\r\n    const [tournamentStated, setTournamentStarted] = useState(false);\r\n\r\n\r\n      \r\n    useEffect(() => {\r\n        const a = async () => {\r\n            if  (!hasGroup()) {\r\n                // handle if not a member of any group\r\n                return;\r\n            }\r\n\r\n            // console.log(\"Calling getcaptain\")\r\n            // get start of tournamnet (i.e. start of 1st match)\r\n            var gameStarted = false;  \r\n            var mygroup  = localStorage.getItem(\"gid\")\r\n            var response = await axios.get(`/user/getcaptain/${mygroup}/${localStorage.getItem(\"uid\")}`);\r\n            // console.log(response.data[0]);\r\n            if (response.data.length > 0) {\r\n                SetSelectedCaptain(response.data[0].captainName);\r\n                SetSelectedViceCaptain(response.data[0].viceCaptainName)\r\n            }\r\n\r\n            // get list of player purchased by user for aelecting captain / vice captain\r\n            var myUrl = `/user/myteamwos/${mygroup}/${localStorage.getItem(\"uid\")}`;\r\n            const teamResponse = await axios.get(myUrl);\r\n            setMyTeamTableData(teamResponse.data[0].players);\r\n            // console.log(teamResponse.data[0].players) ;\r\n\r\n            response = await axios.get(`/group/gamestarted/${localStorage.getItem(\"gid\")}`);\r\n            gameStarted = (response.data.length > 0);\r\n            // gameStarted = false;\r\n            setTournamentStarted(gameStarted);\r\n        }\r\n        a();\r\n    }, [])\r\n\r\n   \r\n    function handleSelectedCaptain(newCap) {\r\n        if (!tournamentStated)\r\n        if (newCap !== selectedViceCaptain)\r\n            SetSelectedCaptain(newCap);\r\n    };\r\n\r\n    function handleSelectedViceCaptain(newViceCap) {\r\n        if (!tournamentStated)\r\n        if (newViceCap !== selectedCaptain)\r\n            SetSelectedViceCaptain(newViceCap);\r\n    };\r\n\r\n    async function updateCVC(corvc) {\r\n        var myUrl=\"\"\r\n        if (corvc === 'captain')\r\n            myUrl = `/user/captain/${localStorage.getItem(\"gid\")}/${localStorage.getItem(\"uid\")}/${selectedCaptain}`;\r\n        else\r\n        myUrl = `/user/vicecaptain/${localStorage.getItem(\"gid\")}/${localStorage.getItem(\"uid\")}/${selectedViceCaptain}`;\r\n        console.log(myUrl);\r\n        const resp = await  axios.get(myUrl);\r\n        return;        \r\n    }\r\n\r\n    function updateCaptain() {\r\n        console.log(\"upd captin vc details\");\r\n        updateCVC(\"captain\");\r\n        updateCVC(\"vicecaptain\");\r\n    }\r\n\r\n    function DisplayCaptainSelectButton() {\r\n    return (\r\n        <div align=\"center\">\r\n        <Button variant=\"contained\" color=\"primary\" size=\"small\"\r\n            disabled={tournamentStated}\r\n            className={classes.button} onClick={updateCaptain}>Update\r\n        </Button>\r\n        </div>\r\n        );\r\n    }\r\n\r\n    function ShowCaptainViceCaptain() {\r\n        return(\r\n        <Table\r\n            tableKey=\"t-cvc\"\r\n            id=\"t-cvc\"\r\n            size=\"small\"\r\n            tableHeaderColor=\"warning\"\r\n            tableHead={[\"Player Name\", \"Captain\", \"Vice Captain\"]}\r\n            tableData={myTeamTableData.map(x => {\r\n                const arr = [\r\n                    x.playerName,\r\n                    <FormControlLabel \r\n                    key={cPrefix+x.playerName}\r\n                    id={cPrefix+x.playerName}\r\n                    className={classes.captain} \r\n                    value={x.playerName}    \r\n                    control={<Radio color=\"primary\" key={cPrefix+x.playerName} id={cPrefix+x.playerName} defaultChecked={x.playerName === selectedCaptain}/>}\r\n                    onClick={() => handleSelectedCaptain(x.playerName)}\r\n                    checked={selectedCaptain === x.playerName}\r\n                    disabled={tournamentStated}\r\n                    />,\r\n                    <FormControlLabel \r\n                    key={vcPrefix+x.playerName}\r\n                    id={vcPrefix+x.playerName}\r\n                    className={classes.captain} \r\n                    value={x.playerName}    \r\n                    control={<Radio color=\"primary\" key={vcPrefix+x.playerName} id={cPrefix+x.playerName} defaultChecked={x.playerName === selectedViceCaptain}/>}\r\n                    onClick={() => handleSelectedViceCaptain(x.playerName)}\r\n                    checked={selectedViceCaptain === x.playerName}\r\n                    disabled={tournamentStated}\r\n                    />\r\n                ]\r\n                return { data: arr, key: \"pid\", collapse: [] }\r\n            })}\r\n        />\r\n        );\r\n    };\r\n\r\n    function DisplayTournamentStarted() {\r\n        if (tournamentStated)\r\n            return (\r\n                <Typography className={classes.error} align=\"center\">(cannot update after tournament has started.)</Typography>\r\n            );\r\n        else\r\n            return(<div></div>);\r\n    }\r\n\r\n\r\n    if (hasGroup())\r\n        return (\r\n        <div className={classes.root} key=\"cpataininfo\">\r\n            {/* <h3 align=\"center\">Captain and Vice Captain ({localStorage.getItem(\"tournament\")})</h3> */}\r\n            {/* <h3 className={classes.hdrText} align=\"center\">Captain/ViceCaptain</h3> */}\r\n            {/* <Typography align=\"center\" component=\"h1\" variant=\"h5\">Captain/ViceCaptain</Typography> */}\r\n            {/* <DisplayGroupName groupName={localStorage.getItem(\"groupName\")}/> */}\r\n            <DisplayPageHeader headerName=\"Captain/ViceCaptain\" groupName={localStorage.getItem(\"groupName\")}/>\r\n            <DisplayTournamentStarted/>\r\n            <ShowCaptainViceCaptain/>\r\n            <DisplayCaptainSelectButton/>\r\n        </div>\r\n        );\r\n    else\r\n        return <NoGroup/>;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}