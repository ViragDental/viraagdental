{"ast":null,"code":"import _regeneratorRuntime from\"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from'react';import axios from\"axios\";import{makeStyles}from'@material-ui/core/styles';import{Switch,Route}from'react-router-dom';import Link from'@material-ui/core/Link';import Button from'@material-ui/core/Button';import Table from\"components/Table/Table.js\";import FormControlLabel from'@material-ui/core/FormControlLabel';import Radio from'@material-ui/core/Radio';import Grid from\"@material-ui/core/Grid\";import GridItem from\"components/Grid/GridItem.js\";import Card from\"components/Card/Card.js\";import CardBody from\"components/Card/CardBody.js\";// import Accordion from '@material-ui/core/Accordion';\n// import AccordionSummary from '@material-ui/core/AccordionSummary';\n// import AccordionDetails from '@material-ui/core/AccordionDetails';\nimport Typography from'@material-ui/core/Typography';// import ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport{useHistory}from\"react-router-dom\";import{UserContext}from\"../../UserContext\";import GroupMember from\"views/Group/GroupMember.js\";import NewGroup from\"views/Group/NewGroup.js\";import GroupDetails from\"views/Group/GroupDetails.js\";import{cdCurrent,cdDefault,hasGroup,getUserBalance}from\"views/functions.js\";import{BlankArea,NothingToDisplay,DisplayBalance}from\"CustomComponents/CustomComponents.js\";import green from'@material-ui/core/colors/green';import{setTab}from\"CustomComponents/CricDreamTabs.js\";var rPrefix=\"radio-\";var useStyles=makeStyles(function(theme){return{root:{width:'100%'},symbolText:{color:'#4CC417'// backgroundColor: green[700],\n},button:{margin:theme.spacing(0,1,0)},heading:{fontSize:theme.typography.pxToRem(15),flexBasis:'33.33%',flexShrink:0},secondaryHeading:{fontSize:theme.typography.pxToRem(15),color:theme.palette.text.secondary}};});export default function Group(){// window.onbeforeunload = () => setUser(null)\n// const { setUser } = useContext(UserContext);\nvar classes=useStyles();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),myGroupTableData=_useState2[0],setMyGroupTableData=_useState2[1];var history=useHistory();var _useState3=useState(localStorage.getItem(\"groupName\")),_useState4=_slicedToArray(_useState3,2),newCurrentGroup=_useState4[0],setNewCurrentGroup=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),balance=_useState6[0],setBalance=_useState6[1];useEffect(function(){var a=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var myBalance,myUrl,teamResponse,setnew,tmp,myGroup;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getUserBalance();case 2:myBalance=_context.sent;setBalance(myBalance);// console.log(myBalance); \nwindow.localStorage.setItem(\"groupMember\",\"\");myUrl=\"\".concat(process.env.REACT_APP_AXIOS_BASEPATH,\"/group/memberof/\").concat(localStorage.getItem(\"uid\"));_context.next=8;return axios.get(myUrl);case 8:teamResponse=_context.sent;// console.log(teamResponse.data[0].groups);\nsetnew=true;if(hasGroup()){// just check if current group is part of group list \ntmp=teamResponse.data[0].groups.find(function(x){return x.gid==localStorage.getItem(\"gid\");});if(tmp)setnew=false;}// console.log(`Set new is ${setnew}`);\nif(setnew){if(teamResponse.data[0].groups.length>0){myGroup=teamResponse.data[0].groups[0];// console.log(myGroup);\nlocalStorage.setItem(\"gid\",myGroup.gid.toString());localStorage.setItem(\"groupName\",myGroup.groupName);localStorage.setItem(\"tournament\",myGroup.tournament);localStorage.setItem(\"admin\",false);setNewCurrentGroup(myGroup.name);}else{localStorage.setItem(\"gid\",\"\");localStorage.setItem(\"groupName\",\"\");localStorage.setItem(\"tournament\",\"\");localStorage.setItem(\"admin\",false);setNewCurrentGroup(\"\");}}setMyGroupTableData(teamResponse.data[0].groups);// console.log(teamResponse.data[0].groups);\ncase 13:case\"end\":return _context.stop();}}},_callee);}));return function a(){return _ref.apply(this,arguments);};}();a();},[]);function handleGroupDetails(grpName){// console.log(`Show group details of ${grpName}`)\nvar ggg=myGroupTableData.find(function(x){return x.groupName===grpName;});//console.log(ggg);\nwindow.localStorage.setItem(\"gdGid\",ggg.gid.toString());window.localStorage.setItem(\"gdName\",ggg.groupName);window.localStorage.setItem(\"gdDisplay\",ggg.displayName);window.localStorage.setItem(\"gdAdmin\",ggg.admin);window.localStorage.setItem(\"gdCurrent\",newCurrentGroup===ggg.groupName?\"true\":\"false\");window.localStorage.setItem(\"gdDefault\",ggg.defaultGroup);window.localStorage.setItem(\"gdTournament\",ggg.tournament);// history.push(`/admin/groupdetails`);\nsetTab(102);}function handleSelectGroup(grpName){// var myId;\nvar myElement;myElement=document.getElementById(rPrefix+newCurrentGroup);// console.log(myElement);\nmyElement.checked=false;setNewCurrentGroup(grpName);// set this group as default group\nvar ggg=myGroupTableData.find(function(x){return x.groupName===grpName;});window.localStorage.setItem(\"gid\",ggg.gid.toString());// var response = await axios.get(`/group/current/` +\n//     `${localStorage.getItem(\"gid\")}/${localStorage.getItem(\"uid\")}`);\n// // SAMPLE OUTPUT\n// // {\"uid\":\"8\",\"gid\":2,\"displayName\":\"Salgia Super Stars\",\n// // \"groupName\":\"Happy Home Society Grp 2\",\"tournament\":\"ENGAUST20\",\"ismember\":true,\"admin\":true}\n// // window.localStorage.setItem(\"uid\", myUID)\nwindow.localStorage.setItem(\"displayName\",ggg.displayName);window.localStorage.setItem(\"groupName\",ggg.groupName);window.localStorage.setItem(\"tournament\",ggg.tournament);window.localStorage.setItem(\"admin\",ggg.admin);// setUser({ uid: localStorage.getItem(\"uid\"), admin: ggg.admin })    \n};/*\r\n    function ShowGroupMembers() {\r\n        var grpName = localStorage.getItem(\"groupName\");\r\n        var ggg = myGroupTableData.find(x=> x.groupName === grpName);\r\n        console.log(ggg);\r\n        window.localStorage.setItem(\"gdGid\", ggg.gid.toString());\r\n        window.localStorage.setItem(\"gdName\", ggg.groupName)\r\n        window.localStorage.setItem(\"gdAdmin\", ggg.admin);\r\n        // console.log(\"abou to call /admin/membergroup \")\r\n        //history.push(\"/admin/membergroup\");        \r\n    };\r\n\r\n    function EditGroupProfile() {\r\n        console.log(\"edit profile\")\r\n    }   \r\n    \r\n    */function handleNewGroup(){//history.push(\"/newgroup\");        \nsetTab(parseInt(process.env.REACT_APP_BASEPOS)+parseInt(process.env.REACT_APP_NEWGROUP));};function handleJoinGroup(){// history.push(\"/admin/newgroup\"); \nlocalStorage.setItem(\"joinGroupCode\",\"\");setTab(parseInt(process.env.REACT_APP_BASEPOS)+parseInt(process.env.REACT_APP_JOINGROUP));};function ShowAllGroups(){return/*#__PURE__*/React.createElement(Grid,{key:\"gr-group\",container:true,justify:\"center\",alignItems:\"center\"},/*#__PURE__*/React.createElement(GridItem,{key:\"gi-group\",xs:12,sm:12,md:12,lg:12},/*#__PURE__*/React.createElement(Card,{key:\"c-group\",profile:true},/*#__PURE__*/React.createElement(CardBody,{key:\"cb-group\",profile:true},/*#__PURE__*/React.createElement(Table,{tableKey:\"t-group\",id:\"t-group\",tableHeaderColor:\"warning\",tableHead:[\"Group Name\",\"\",\"Admin\"],tableData:myGroupTableData.map(function(x){var myName=x.groupName;var currentChar=\"\";if(newCurrentGroup===x.groupName)currentChar=cdCurrent();if(x.defaultGroup)currentChar=currentChar+cdDefault();// console.log(x);\nvar arr=[/*#__PURE__*/React.createElement(Link,{href:\"#\",onClick:function onClick(){return handleGroupDetails(x.groupName);},variant:\"body2\"},/*#__PURE__*/React.createElement(Typography,null,myName)),/*#__PURE__*/React.createElement(Typography,{className:classes.symbolText},currentChar),/*#__PURE__*/React.createElement(Typography,null,x.admin?\"Admin\":\"\")// <Link href=\"#\" onClick={() => handleGroupDetails(x.groupName)} variant=\"body2\">\n// Details\n// </Link>\n// <FormControlLabel \n// key={\"fc-\"+x.groupName}\n// className={classes.groupName} \n// value={x.groupName}    \n// control={<Radio color=\"primary\" key={rPrefix+x.groupName} id={rPrefix+x.groupName} defaultChecked={x.groupName === newCurrentGroup}/>}\n// onClick={() => handleSelectGroup(x.groupName)}\n// />\n];return{data:arr,collapse:[]};})})))));}return/*#__PURE__*/React.createElement(\"div\",{className:classes.root,align:\"center\",key:\"groupinfo\"},/*#__PURE__*/React.createElement(DisplayBalance,{balance:balance}),/*#__PURE__*/React.createElement(\"h3\",{align:\"center\"},\"My Groups\"),/*#__PURE__*/React.createElement(ShowAllGroups,null),/*#__PURE__*/React.createElement(Button,{key:\"create\",variant:\"contained\",color:\"primary\",size:\"small\",className:classes.button,onClick:handleNewGroup},\"New Group\"),/*#__PURE__*/React.createElement(Button,{key:\"progile\",variant:\"contained\",color:\"primary\",size:\"small\",className:classes.button,onClick:handleJoinGroup},\"Join Group\"));}","map":{"version":3,"sources":["D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/src/views/Group/Group.js"],"names":["React","useEffect","useState","useContext","axios","makeStyles","Switch","Route","Link","Button","Table","FormControlLabel","Radio","Grid","GridItem","Card","CardBody","Typography","useHistory","UserContext","GroupMember","NewGroup","GroupDetails","cdCurrent","cdDefault","hasGroup","getUserBalance","BlankArea","NothingToDisplay","DisplayBalance","green","setTab","rPrefix","useStyles","theme","root","width","symbolText","color","button","margin","spacing","heading","fontSize","typography","pxToRem","flexBasis","flexShrink","secondaryHeading","palette","text","secondary","Group","classes","myGroupTableData","setMyGroupTableData","history","localStorage","getItem","newCurrentGroup","setNewCurrentGroup","balance","setBalance","a","myBalance","window","setItem","myUrl","process","env","REACT_APP_AXIOS_BASEPATH","get","teamResponse","setnew","tmp","data","groups","find","x","gid","length","myGroup","toString","groupName","tournament","name","handleGroupDetails","grpName","ggg","displayName","admin","defaultGroup","handleSelectGroup","myElement","document","getElementById","checked","handleNewGroup","parseInt","REACT_APP_BASEPOS","REACT_APP_NEWGROUP","handleJoinGroup","REACT_APP_JOINGROUP","ShowAllGroups","map","myName","currentChar","arr","collapse"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport axios from \"axios\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport Link from '@material-ui/core/Link';\r\nimport Button from '@material-ui/core/Button';\r\nimport Table from \"components/Table/Table.js\";\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport GridItem from \"components/Grid/GridItem.js\";\r\nimport Card from \"components/Card/Card.js\";\r\nimport CardBody from \"components/Card/CardBody.js\";\r\n// import Accordion from '@material-ui/core/Accordion';\r\n// import AccordionSummary from '@material-ui/core/AccordionSummary';\r\n// import AccordionDetails from '@material-ui/core/AccordionDetails';\r\nimport Typography from '@material-ui/core/Typography';\r\n// import ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { UserContext } from \"../../UserContext\";\r\nimport GroupMember from \"views/Group/GroupMember.js\"\r\nimport NewGroup from \"views/Group/NewGroup.js\"\r\nimport GroupDetails from \"views/Group/GroupDetails.js\"\r\nimport { cdCurrent, cdDefault, hasGroup, getUserBalance} from \"views/functions.js\"\r\nimport {BlankArea, NothingToDisplay, DisplayBalance} from \"CustomComponents/CustomComponents.js\"\r\nimport green from '@material-ui/core/colors/green';\r\nimport {setTab} from \"CustomComponents/CricDreamTabs.js\"\r\nconst rPrefix = \"radio-\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      width: '100%',\r\n    },\r\n    symbolText: {\r\n        color: '#4CC417',\r\n        // backgroundColor: green[700],\r\n    },\r\n    button: {\r\n        margin: theme.spacing(0, 1, 0),\r\n      },\r\n        heading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      flexBasis: '33.33%',\r\n      flexShrink: 0,\r\n    },\r\n    secondaryHeading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      color: theme.palette.text.secondary,\r\n    },\r\n  }));\r\n\r\n\r\nexport default function Group() {\r\n\r\n    // window.onbeforeunload = () => setUser(null)\r\n    // const { setUser } = useContext(UserContext);\r\n    const classes = useStyles();\r\n    const [myGroupTableData, setMyGroupTableData] = useState([]);\r\n    const history = useHistory();\r\n    const [newCurrentGroup, setNewCurrentGroup] = useState(localStorage.getItem(\"groupName\"));\r\n    const [balance, setBalance] = useState(0);\r\n\r\n      \r\n    useEffect(() => {\r\n        const a = async () => {\r\n            let myBalance = await getUserBalance();\r\n            setBalance(myBalance);\r\n            // console.log(myBalance); \r\n\r\n            window.localStorage.setItem(\"groupMember\", \"\");\r\n            var myUrl = `${process.env.REACT_APP_AXIOS_BASEPATH}/group/memberof/${localStorage.getItem(\"uid\")}`;\r\n            const teamResponse = await axios.get(myUrl);\r\n            // console.log(teamResponse.data[0].groups);\r\n            let setnew = true;\r\n            if (hasGroup()) {\r\n                // just check if current group is part of group list \r\n                let tmp = teamResponse.data[0].groups.find(x => x.gid == localStorage.getItem(\"gid\"));\r\n                if (tmp) setnew = false;\r\n            }\r\n            // console.log(`Set new is ${setnew}`);\r\n            if (setnew) {\r\n                if (teamResponse.data[0].groups.length > 0) {\r\n                    var myGroup = teamResponse.data[0].groups[0];\r\n                    // console.log(myGroup);\r\n                    localStorage.setItem(\"gid\", myGroup.gid.toString());\r\n                    localStorage.setItem(\"groupName\", myGroup.groupName);\r\n                    localStorage.setItem(\"tournament\", myGroup.tournament);\r\n                    localStorage.setItem(\"admin\", false)\r\n                    setNewCurrentGroup(myGroup.name);\r\n                } else {\r\n                    localStorage.setItem(\"gid\", \"\");\r\n                    localStorage.setItem(\"groupName\", \"\");\r\n                    localStorage.setItem(\"tournament\", \"\");\r\n                    localStorage.setItem(\"admin\", false)\r\n                    setNewCurrentGroup(\"\");\r\n                }\r\n            }\r\n            setMyGroupTableData(teamResponse.data[0].groups);\r\n            // console.log(teamResponse.data[0].groups);\r\n            }\r\n        a();\r\n    }, [])\r\n\r\n\r\n    function handleGroupDetails(grpName) {\r\n        // console.log(`Show group details of ${grpName}`)\r\n        var ggg = myGroupTableData.find(x => x.groupName === grpName);\r\n        //console.log(ggg);\r\n        window.localStorage.setItem(\"gdGid\", ggg.gid.toString());\r\n        window.localStorage.setItem(\"gdName\", ggg.groupName)\r\n        window.localStorage.setItem(\"gdDisplay\", ggg.displayName)\r\n        window.localStorage.setItem(\"gdAdmin\", ggg.admin);\r\n        window.localStorage.setItem(\"gdCurrent\", (newCurrentGroup === ggg.groupName) ? \"true\" : \"false\");\r\n        window.localStorage.setItem(\"gdDefault\", ggg.defaultGroup);\r\n        window.localStorage.setItem(\"gdTournament\", ggg.tournament);\r\n        // history.push(`/admin/groupdetails`);\r\n        setTab(102);\r\n    }\r\n\r\n    function handleSelectGroup(grpName) {\r\n        // var myId;\r\n        var myElement;\r\n        myElement = document.getElementById(rPrefix + newCurrentGroup);\r\n        // console.log(myElement);\r\n        myElement.checked = false;\r\n        setNewCurrentGroup(grpName);\r\n\r\n        // set this group as default group\r\n        var ggg = myGroupTableData.find(x => x.groupName === grpName);\r\n        window.localStorage.setItem(\"gid\", ggg.gid.toString());\r\n        // var response = await axios.get(`/group/current/` +\r\n        //     `${localStorage.getItem(\"gid\")}/${localStorage.getItem(\"uid\")}`);\r\n        // // SAMPLE OUTPUT\r\n        // // {\"uid\":\"8\",\"gid\":2,\"displayName\":\"Salgia Super Stars\",\r\n        // // \"groupName\":\"Happy Home Society Grp 2\",\"tournament\":\"ENGAUST20\",\"ismember\":true,\"admin\":true}\r\n        // // window.localStorage.setItem(\"uid\", myUID)\r\n        window.localStorage.setItem(\"displayName\", ggg.displayName);\r\n        window.localStorage.setItem(\"groupName\", ggg.groupName);\r\n        window.localStorage.setItem(\"tournament\", ggg.tournament);\r\n        window.localStorage.setItem(\"admin\", ggg.admin)\r\n        // setUser({ uid: localStorage.getItem(\"uid\"), admin: ggg.admin })    \r\n    };\r\n\r\n\r\n\r\n    /*\r\n    function ShowGroupMembers() {\r\n        var grpName = localStorage.getItem(\"groupName\");\r\n        var ggg = myGroupTableData.find(x=> x.groupName === grpName);\r\n        console.log(ggg);\r\n        window.localStorage.setItem(\"gdGid\", ggg.gid.toString());\r\n        window.localStorage.setItem(\"gdName\", ggg.groupName)\r\n        window.localStorage.setItem(\"gdAdmin\", ggg.admin);\r\n        // console.log(\"abou to call /admin/membergroup \")\r\n        //history.push(\"/admin/membergroup\");        \r\n    };\r\n\r\n    function EditGroupProfile() {\r\n        console.log(\"edit profile\")\r\n    }   \r\n    \r\n    */\r\n\r\n    function handleNewGroup() {\r\n        //history.push(\"/newgroup\");        \r\n        setTab(parseInt(process.env.REACT_APP_BASEPOS) + parseInt(process.env.REACT_APP_NEWGROUP));\r\n    };\r\n\r\n    function handleJoinGroup() {\r\n        // history.push(\"/admin/newgroup\"); \r\n        localStorage.setItem(\"joinGroupCode\", \"\");       \r\n        setTab(parseInt(process.env.REACT_APP_BASEPOS) + parseInt(process.env.REACT_APP_JOINGROUP));\r\n    };\r\n\r\n\r\n    function  ShowAllGroups() {\r\n        return(\r\n            <Grid key=\"gr-group\" container justify=\"center\" alignItems=\"center\" >\r\n            <GridItem key=\"gi-group\" xs={12} sm={12} md={12} lg={12} >\r\n                <Card key=\"c-group\" profile>\r\n                    <CardBody key=\"cb-group\" profile>\r\n                        <Table\r\n                            tableKey=\"t-group\"\r\n                            id=\"t-group\"\r\n                            tableHeaderColor=\"warning\"\r\n                            tableHead={[\"Group Name\",\"\", \"Admin\"]}\r\n                            tableData={myGroupTableData.map(x => {\r\n                                var myName = x.groupName;\r\n                                var currentChar = \"\";\r\n                                if (newCurrentGroup === x.groupName) currentChar = cdCurrent();\r\n                                if (x.defaultGroup) currentChar =  currentChar + cdDefault();\r\n                                // console.log(x);\r\n                                const arr = [\r\n                                    <Link href=\"#\" onClick={() => handleGroupDetails(x.groupName)} variant=\"body2\">\r\n                                    <Typography>{myName}</Typography>\r\n                                    </Link>,\r\n                                    <Typography className={classes.symbolText}>{currentChar}</Typography>,\r\n                                    <Typography>{((x.admin) ? \"Admin\" : \"\")}</Typography>\r\n                                    // <Link href=\"#\" onClick={() => handleGroupDetails(x.groupName)} variant=\"body2\">\r\n                                    // Details\r\n                                    // </Link>\r\n                                    // <FormControlLabel \r\n                                    // key={\"fc-\"+x.groupName}\r\n                                    // className={classes.groupName} \r\n                                    // value={x.groupName}    \r\n                                    // control={<Radio color=\"primary\" key={rPrefix+x.groupName} id={rPrefix+x.groupName} defaultChecked={x.groupName === newCurrentGroup}/>}\r\n                                    // onClick={() => handleSelectGroup(x.groupName)}\r\n                                    // />\r\n                                ]\r\n                                return { data: arr, collapse: [] }\r\n                            })}\r\n                        />\r\n                    </CardBody>\r\n                </Card>\r\n            </GridItem>\r\n            </Grid>\r\n        );\r\n    }\r\n\r\n\r\n    return (\r\n        <div className={classes.root} align=\"center\" key=\"groupinfo\">\r\n            <DisplayBalance balance={balance} />\r\n            <h3 align=\"center\">My Groups</h3>\r\n            <ShowAllGroups/>\r\n            <Button key={\"create\"} variant=\"contained\" color=\"primary\" size=\"small\"\r\n                className={classes.button} onClick={handleNewGroup}>New Group\r\n            </Button>\r\n            <Button key={\"progile\"} variant=\"contained\" color=\"primary\" size=\"small\"\r\n               className={classes.button} onClick={handleJoinGroup}>Join Group\r\n            </Button>\r\n        </div>\r\n        );\r\n    \r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}