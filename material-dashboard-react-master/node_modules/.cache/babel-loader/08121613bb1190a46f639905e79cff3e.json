{"ast":null,"code":"import _regeneratorRuntime from\"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Grid from\"@material-ui/core/Grid\";import Table from\"components/Table/Table.js\";import GridItem from\"components/Grid/GridItem.js\";import Accordion from'@material-ui/core/Accordion';import AccordionSummary from'@material-ui/core/AccordionSummary';import AccordionDetails from'@material-ui/core/AccordionDetails';import Typography from'@material-ui/core/Typography';import ExpandMoreIcon from'@material-ui/icons/ExpandMore';import{makeStyles}from'@material-ui/core/styles';// import styles from \"assets/jss/material-dashboard-react/views/dashboardStyle.js\";\nimport socketIOClient from\"socket.io-client\";import{NoGroup,DisplayPageHeader}from'CustomComponents/CustomComponents.js';// import {socketPoint} from \"views/functions.js\";\nvar useStyles=makeStyles(function(theme){return{root:{width:'100%'},heading:{fontSize:theme.typography.pxToRem(15),fontWeight:theme.typography.fontWeightRegular}};});function leavingStatistics(myConn){console.log(\"Leaving Statistics wah wah \");myConn.disconnect();}export default function Stats(){var classes=useStyles();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),teamArray=_useState2[0],setTeamArray=_useState2[1];useEffect(function(){var makeconnection=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return socket.connect();case 2:case\"end\":return _context.stop();}}},_callee);}));return function makeconnection(){return _ref.apply(this,arguments);};}();var socket=socketIOClient(process.env.REACT_APP_ENDPOINT);makeconnection();socket.on(\"connect\",function(){// console.log(`STATS gis ${localStorage.getItem(\"gid\")}`);\nvar sendMessage={page:\"STAT\",gid:localStorage.getItem(\"gid\"),uid:localStorage.getItem(\"uid\")};socket.emit(\"page\",sendMessage);// console.log(\"stat connected\")\nsocket.on(\"brief\",function(stat){var gStat=stat.filter(function(x){return x.gid===parseInt(localStorage.getItem(\"gid\"));});if(gStat.length>0){setTeamArray(gStat);// console.log(gStat);\n}});});return function(){// componentwillunmount in functional component.\n// Anything in here is fired on component unmount.\nleavingStatistics(socket);};},[]);var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),expandedPanel=_useState4[0],setExpandedPanel=_useState4[1];var handleAccordionChange=function handleAccordionChange(panel){return function(event,isExpanded){// console.log({ event, isExpanded });\nsetExpandedPanel(isExpanded?panel:false);};};function ShowStats(){return teamArray.map(function(team){return/*#__PURE__*/React.createElement(Accordion,{expanded:expandedPanel===team.displayName,onChange:handleAccordionChange(team.displayName)},/*#__PURE__*/React.createElement(AccordionSummary,{expandIcon:/*#__PURE__*/React.createElement(ExpandMoreIcon,null),\"aria-controls\":\"panel1a-content\",id:\"panel1a-header\"},/*#__PURE__*/React.createElement(Typography,{className:classes.heading},team.displayName,\" (\",team.userScore,\")\")),/*#__PURE__*/React.createElement(AccordionDetails,null,/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"center\",alignItems:\"center\"},/*#__PURE__*/React.createElement(GridItem,{xs:12,sm:12,md:12,lg:12},/*#__PURE__*/React.createElement(Table,{tableHeaderColor:\"warning\",tableHead:[\"Player Name\",\"Score\"],tableData:team.playerStat.map(function(player){var arr=[player.playerName,player.playerScore];return{data:arr,collapse:[]};})})))));});}if(localStorage.getItem(\"tournament\").length>0)return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(DisplayPageHeader,{headerName:\"Statistics\",groupName:localStorage.getItem(\"groupName\"),tournament:localStorage.getItem(\"tournament\")}),/*#__PURE__*/React.createElement(ShowStats,null));else return/*#__PURE__*/React.createElement(NoGroup,null);};","map":{"version":3,"sources":["D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/src/views/Statistics/Statistics.js"],"names":["React","useEffect","useState","Grid","Table","GridItem","Accordion","AccordionSummary","AccordionDetails","Typography","ExpandMoreIcon","makeStyles","socketIOClient","NoGroup","DisplayPageHeader","useStyles","theme","root","width","heading","fontSize","typography","pxToRem","fontWeight","fontWeightRegular","leavingStatistics","myConn","console","log","disconnect","Stats","classes","teamArray","setTeamArray","makeconnection","socket","connect","process","env","REACT_APP_ENDPOINT","on","sendMessage","page","gid","localStorage","getItem","uid","emit","stat","gStat","filter","x","parseInt","length","expandedPanel","setExpandedPanel","handleAccordionChange","panel","event","isExpanded","ShowStats","map","team","displayName","userScore","playerStat","player","arr","playerName","playerScore","data","collapse"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Table from \"components/Table/Table.js\";\r\nimport GridItem from \"components/Grid/GridItem.js\";\r\nimport Accordion from '@material-ui/core/Accordion';\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\r\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n// import styles from \"assets/jss/material-dashboard-react/views/dashboardStyle.js\";\r\nimport socketIOClient from \"socket.io-client\";\r\nimport { NoGroup, DisplayPageHeader } from 'CustomComponents/CustomComponents.js';\r\n// import {socketPoint} from \"views/functions.js\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    fontWeight: theme.typography.fontWeightRegular,\r\n  },\r\n}));\r\n  \r\n\r\nfunction leavingStatistics(myConn) {\r\n  console.log(\"Leaving Statistics wah wah \");\r\n  myConn.disconnect();\r\n}\r\n\r\nexport default function Stats() { \r\n  const classes = useStyles();\r\n  const [teamArray, setTeamArray] = useState([]);\r\n\r\n  useEffect(() => {  \r\n    const makeconnection = async () => {\r\n      await socket.connect();\r\n    }\r\n\r\n    const socket = socketIOClient(process.env.REACT_APP_ENDPOINT);\r\n\r\n    makeconnection();\r\n\r\n    socket.on(\"connect\", () => {\r\n      // console.log(`STATS gis ${localStorage.getItem(\"gid\")}`);\r\n      var sendMessage = {page: \"STAT\", gid: localStorage.getItem(\"gid\"), uid: localStorage.getItem(\"uid\") };\r\n      socket.emit(\"page\", sendMessage);\r\n      // console.log(\"stat connected\")\r\n\r\n      socket.on(\"brief\", (stat) => {\r\n        var gStat = stat.filter(x => x.gid === parseInt(localStorage.getItem(\"gid\")));\r\n        if (gStat.length > 0) {\r\n          setTeamArray(gStat)\r\n          // console.log(gStat);\r\n        }\r\n      })\r\n    });\r\n\r\n    return () => {\r\n      // componentwillunmount in functional component.\r\n      // Anything in here is fired on component unmount.\r\n      leavingStatistics(socket);\r\n    }\r\n  }, []);\r\n\r\n\r\n  const [expandedPanel, setExpandedPanel] = useState(false);\r\n  const handleAccordionChange = (panel) => (event, isExpanded) => {\r\n    // console.log({ event, isExpanded });\r\n    setExpandedPanel(isExpanded ? panel : false);\r\n  };\r\n\r\n  function ShowStats() {  \r\n      return (teamArray.map(team =>\r\n      <Accordion expanded={expandedPanel === team.displayName} onChange={handleAccordionChange(team.displayName)}>\r\n          <AccordionSummary expandIcon={<ExpandMoreIcon />} aria-controls=\"panel1a-content\" id=\"panel1a-header\">\r\n              <Typography className={classes.heading}>{team.displayName} ({team.userScore})</Typography>\r\n          </AccordionSummary>\r\n          <AccordionDetails>\r\n              <Grid container justify=\"center\" alignItems=\"center\" >\r\n                  <GridItem xs={12} sm={12} md={12} lg={12} >\r\n                      <Table\r\n                          tableHeaderColor=\"warning\"\r\n                          tableHead={[\"Player Name\", \"Score\"]}\r\n                          tableData={team.playerStat.map(player => {\r\n                              const arr = [player.playerName, player.playerScore]\r\n                              return { data: arr, collapse: [] }\r\n                          })}\r\n                      />\r\n                  </GridItem>\r\n              </Grid>\r\n          </AccordionDetails>\r\n      </Accordion>\r\n      ))\r\n  }\r\n  if (localStorage.getItem(\"tournament\").length > 0)\r\n  return (\r\n    <div className={classes.root}>\r\n      <DisplayPageHeader headerName=\"Statistics\" groupName={localStorage.getItem(\"groupName\")} tournament={localStorage.getItem(\"tournament\")}/>\r\n      <ShowStats/>\r\n    </div>\r\n  );\r\n  else\r\n    return <NoGroup/>;\r\n};\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}