{"ast":null,"code":"import _regeneratorRuntime from \"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\projects\\\\Cricket\\\\akshu close\\\\IPL\\\\material-dashboard-react-master\\\\src\\\\views\\\\Captain\\\\Captain.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport axios from \"axios\";\nimport { makeStyles } from '@material-ui/core/styles'; // import { Switch, Route, Link } from 'react-router-dom';\n\nimport Button from '@material-ui/core/Button';\nimport Table from \"components/Table/Table.js\";\nimport Typography from '@material-ui/core/Typography'; // import TableRow from '@material-ui/core/TableRow';\n// import TableCell from '@material-ui/core/TableCell';\n\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Radio from '@material-ui/core/Radio'; // import Grid from \"@material-ui/core/Grid\";\n// import GridItem from \"components/Grid/GridItem.js\";\n// import Card from \"components/Card/Card.js\";\n// import CardBody from \"components/Card/CardBody.js\";\n\nimport { UserContext } from \"../../UserContext\";\nimport { NoGroup, DisplayPageHeader, MessageToUser } from 'CustomComponents/CustomComponents.js';\nimport { hasGroup } from 'views/functions';\nimport { red, blue } from '@material-ui/core/colors';\nimport { updateLanguageServiceSourceFile } from 'typescript';\nimport { BlankArea } from 'CustomComponents/CustomComponents';\nvar vcPrefix = \"vicecaptain-\";\nvar cPrefix = \"captain-\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      width: '100%'\n    },\n    captain: {\n      color: \"yellow\"\n    },\n    heading: {\n      fontSize: theme.typography.pxToRem(15),\n      flexBasis: '33.33%',\n      flexShrink: 0\n    },\n    secondaryHeading: {\n      fontSize: theme.typography.pxToRem(15),\n      color: theme.palette.text.secondary\n    },\n    error: {\n      // right: 0,\n      fontSize: '12px',\n      color: red[700],\n      alignItems: 'center',\n      marginTop: '0px'\n    },\n    updatemsg: {\n      // right: 0,\n      fontSize: '12px',\n      color: blue[700],\n      // position: 'absolute',\n      alignItems: 'center',\n      marginTop: '0px'\n    },\n    hdrText: {\n      // right: 0,\n      // fontSize: '12px',\n      // color: red[700],\n      // // position: 'absolute',\n      align: 'center',\n      marginTop: '0px',\n      marginBottom: '0px'\n    }\n  };\n});\nexport default function Captain() {\n  _s();\n\n  window.onbeforeunload = function () {\n    return setUser(\"\");\n  }; // const { setUser } = useContext(UserContext);\n\n\n  var classes = useStyles();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedViceCaptain = _useState2[0],\n      SetSelectedViceCaptain = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedCaptain = _useState4[0],\n      SetSelectedCaptain = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      myTeamTableData = _useState6[0],\n      setMyTeamTableData = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      tournamentStated = _useState8[0],\n      setTournamentStarted = _useState8[1]; //const [ errorMessage, setErrorMessage ] = React.useState(\"\");\n  //const [backDropOpen, setBackDropOpen] = React.useState(false);\n  //const [userMessage, setUserMessage] = React.useState(\"\");\n\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      registerStatus = _useState10[0],\n      setRegisterStatus = _useState10[1];\n\n  useEffect(function () {\n    var a = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var gameStarted, mygroup, response, myUrl, teamResponse;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (hasGroup()) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                // console.log(\"Calling getcaptain\")\n                // get start of tournamnet (i.e. start of 1st match)\n                gameStarted = false;\n                mygroup = localStorage.getItem(\"gid\");\n                _context.next = 6;\n                return axios.get(\"\".concat(process.env.REACT_APP_AXIOS_BASEPATH, \"/group/gamestarted/\").concat(localStorage.getItem(\"gid\")));\n\n              case 6:\n                response = _context.sent;\n                gameStarted = response.data.length > 0;\n                setTournamentStarted(gameStarted);\n                _context.next = 11;\n                return axios.get(\"\".concat(process.env.REACT_APP_AXIOS_BASEPATH, \"/user/getcaptain/\").concat(mygroup, \"/\").concat(localStorage.getItem(\"uid\")));\n\n              case 11:\n                response = _context.sent;\n\n                // console.log(response.data[0]);\n                if (response.data.length > 0) {\n                  SetSelectedCaptain(response.data[0].captainName);\n                  SetSelectedViceCaptain(response.data[0].viceCaptainName);\n                } // get list of player purchased by user for aelecting captain / vice captain\n\n\n                myUrl = \"\".concat(process.env.REACT_APP_AXIOS_BASEPATH, \"/user/myteamwos/\").concat(mygroup, \"/\").concat(localStorage.getItem(\"uid\"));\n                _context.next = 16;\n                return axios.get(myUrl);\n\n              case 16:\n                teamResponse = _context.sent;\n                setMyTeamTableData(teamResponse.data[0].players); // console.log(teamResponse.data[0].players) ;\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function a() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    a();\n  }, []);\n\n  function ShowResisterStatus() {\n    // console.log(`Status is ${registerStatus}`);\n    var myMsg;\n    var errmsg = true;\n\n    switch (registerStatus) {\n      case 200:\n        myMsg = \"Successfully updated Captain / ViceCaptain details\";\n        errmsg = false;\n        break;\n\n      case 0:\n        myMsg = \"\";\n        errmsg = false;\n        break;\n\n      default:\n        myMsg = \"Error updating Captain / ViceCaptain details\";\n        break;\n    }\n\n    var myClass = errmsg ? classes.error : classes.root;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      align: \"center\",\n      className: myClass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }\n    }, myMsg));\n  }\n\n  function handleSelectedCaptain(newCap) {\n    setRegisterStatus(0);\n    if (!tournamentStated) if (newCap !== selectedViceCaptain) SetSelectedCaptain(newCap);\n  }\n\n  ;\n\n  function handleSelectedViceCaptain(newViceCap) {\n    setRegisterStatus(0);\n    if (!tournamentStated) if (newViceCap !== selectedCaptain) SetSelectedViceCaptain(newViceCap);\n  }\n\n  ;\n\n  function updateCaptain() {\n    return _updateCaptain.apply(this, arguments);\n  }\n\n  function _updateCaptain() {\n    _updateCaptain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var tmp1, tmp2, myUrl, resp;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              // console.log(\"upd captin vc details\");\n              tmp1 = myTeamTableData.find(function (x) {\n                return x.playerName === selectedCaptain;\n              });\n              tmp2 = myTeamTableData.find(function (x) {\n                return x.playerName === selectedViceCaptain;\n              });\n              myUrl = \"\".concat(process.env.REACT_APP_AXIOS_BASEPATH, \"/user/captainvicecaptain/\").concat(localStorage.getItem(\"gid\"), \"/\").concat(localStorage.getItem(\"uid\"), \"/\").concat(tmp1.pid, \"/\").concat(tmp2.pid); // console.log(myUrl);\n\n              _context2.next = 5;\n              return axios.get(myUrl);\n\n            case 5:\n              resp = _context2.sent;\n              // console.log(resp.status)\n              setRegisterStatus(resp.status); // if (resp.status === 200) {\n              //     // setErrorMessage(\"Successfully updated Captain / ViceCaptain details\");\n              //     setUserMessage(\"Successfully updated Captain / ViceCaptain details\");\n              // } else {\n              // //    setErrorMessage(\"Error updating Captain / ViceCaptain details\");\n              //    setUserMessage(\"Error updating Captain / ViceCaptain details\");\n              // }\n              // setBackDropOpen(true);\n              // setTimeout(() => setBackDropOpen(false), process.env.REACT_APP_MESSAGE_TIME);\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _updateCaptain.apply(this, arguments);\n  }\n\n  function DisplayCaptainSelectButton() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      size: \"small\",\n      disabled: tournamentStated,\n      className: classes.button,\n      onClick: updateCaptain,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }\n    }, \"Update\"));\n  }\n\n  function ShowCaptainViceCaptain() {\n    var _this = this;\n\n    return /*#__PURE__*/React.createElement(Table, {\n      tableKey: \"t-cvc\",\n      id: \"t-cvc\",\n      size: \"small\",\n      tableHeaderColor: \"warning\",\n      tableHead: [\"Player Name\", \"Captain\", \"Vice Captain\"],\n      tableData: myTeamTableData.map(function (x) {\n        var arr = [x.playerName, /*#__PURE__*/React.createElement(FormControlLabel, {\n          key: cPrefix + x.playerName,\n          id: cPrefix + x.playerName,\n          className: classes.captain,\n          value: x.playerName,\n          control: /*#__PURE__*/React.createElement(Radio, {\n            color: \"primary\",\n            key: cPrefix + x.playerName,\n            id: cPrefix + x.playerName,\n            defaultChecked: x.playerName === selectedCaptain,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 30\n            }\n          }),\n          onClick: function onClick() {\n            return handleSelectedCaptain(x.playerName);\n          },\n          checked: selectedCaptain === x.playerName,\n          disabled: tournamentStated,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 21\n          }\n        }), /*#__PURE__*/React.createElement(FormControlLabel, {\n          key: vcPrefix + x.playerName,\n          id: vcPrefix + x.playerName,\n          className: classes.captain,\n          value: x.playerName,\n          control: /*#__PURE__*/React.createElement(Radio, {\n            color: \"primary\",\n            key: vcPrefix + x.playerName,\n            id: cPrefix + x.playerName,\n            defaultChecked: x.playerName === selectedViceCaptain,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 30\n            }\n          }),\n          onClick: function onClick() {\n            return handleSelectedViceCaptain(x.playerName);\n          },\n          checked: selectedViceCaptain === x.playerName,\n          disabled: tournamentStated,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 21\n          }\n        })];\n        return {\n          data: arr,\n          key: \"pid\",\n          collapse: []\n        };\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }\n    });\n  }\n\n  ;\n\n  function DisplayTournamentStarted() {\n    if (tournamentStated) return /*#__PURE__*/React.createElement(Typography, {\n      className: classes.error,\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }\n    }, \"(cannot update after tournament has started.)\");else return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 20\n      }\n    });\n  }\n\n  if (hasGroup()) return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    key: \"cpataininfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DisplayPageHeader, {\n    headerName: \"Captain/ViceCaptain\",\n    groupName: localStorage.getItem(\"groupName\"),\n    tournament: localStorage.getItem(\"tournament\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(DisplayTournamentStarted, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(ShowCaptainViceCaptain, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(BlankArea, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(ShowResisterStatus, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(BlankArea, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(DisplayCaptainSelectButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 13\n    }\n  }));else return /*#__PURE__*/React.createElement(NoGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 16\n    }\n  });\n}\n\n_s(Captain, \"4RncvUXfRhgFDEpJPw79WqvlpoA=\", false, function () {\n  return [useStyles];\n});\n\n_c = Captain;\n\nvar _c;\n\n$RefreshReg$(_c, \"Captain\");","map":{"version":3,"sources":["D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/src/views/Captain/Captain.js"],"names":["React","useEffect","useState","useContext","axios","makeStyles","Button","Table","Typography","FormControlLabel","Radio","UserContext","NoGroup","DisplayPageHeader","MessageToUser","hasGroup","red","blue","updateLanguageServiceSourceFile","BlankArea","vcPrefix","cPrefix","useStyles","theme","root","width","captain","color","heading","fontSize","typography","pxToRem","flexBasis","flexShrink","secondaryHeading","palette","text","secondary","error","alignItems","marginTop","updatemsg","hdrText","align","marginBottom","Captain","window","onbeforeunload","setUser","classes","selectedViceCaptain","SetSelectedViceCaptain","selectedCaptain","SetSelectedCaptain","myTeamTableData","setMyTeamTableData","tournamentStated","setTournamentStarted","registerStatus","setRegisterStatus","a","gameStarted","mygroup","localStorage","getItem","get","process","env","REACT_APP_AXIOS_BASEPATH","response","data","length","captainName","viceCaptainName","myUrl","teamResponse","players","ShowResisterStatus","myMsg","errmsg","myClass","handleSelectedCaptain","newCap","handleSelectedViceCaptain","newViceCap","updateCaptain","tmp1","find","x","playerName","tmp2","pid","resp","status","DisplayCaptainSelectButton","button","ShowCaptainViceCaptain","map","arr","key","collapse","DisplayTournamentStarted"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport axios from \"axios\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n// import { Switch, Route, Link } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport Table from \"components/Table/Table.js\";\r\nimport Typography from '@material-ui/core/Typography';\r\n// import TableRow from '@material-ui/core/TableRow';\r\n// import TableCell from '@material-ui/core/TableCell';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Radio from '@material-ui/core/Radio';\r\n// import Grid from \"@material-ui/core/Grid\";\r\n// import GridItem from \"components/Grid/GridItem.js\";\r\n// import Card from \"components/Card/Card.js\";\r\n// import CardBody from \"components/Card/CardBody.js\";\r\nimport { UserContext } from \"../../UserContext\";\r\nimport { NoGroup, DisplayPageHeader, MessageToUser } from 'CustomComponents/CustomComponents.js';\r\nimport { hasGroup } from 'views/functions';\r\nimport { red, blue } from '@material-ui/core/colors';\r\nimport { updateLanguageServiceSourceFile } from 'typescript';\r\nimport { BlankArea } from 'CustomComponents/CustomComponents';\r\nconst vcPrefix = \"vicecaptain-\"\r\nconst cPrefix = \"captain-\"\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      width: '100%',\r\n    },\r\n    captain: {\r\n        color: \"yellow\",\r\n    },     \r\n    heading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      flexBasis: '33.33%',\r\n      flexShrink: 0,\r\n    },\r\n    secondaryHeading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      color: theme.palette.text.secondary,\r\n    },\r\n    error:  {\r\n        // right: 0,\r\n        fontSize: '12px',\r\n        color: red[700],\r\n        alignItems: 'center',\r\n        marginTop: '0px',\r\n    },\r\n    updatemsg:  {\r\n        // right: 0,\r\n        fontSize: '12px',\r\n        color: blue[700],\r\n        // position: 'absolute',\r\n        alignItems: 'center',\r\n        marginTop: '0px',\r\n    },\r\n    hdrText:  {\r\n        // right: 0,\r\n        // fontSize: '12px',\r\n        // color: red[700],\r\n        // // position: 'absolute',\r\n        align: 'center',\r\n        marginTop: '0px',\r\n        marginBottom: '0px',\r\n    },\r\n\r\n    }));\r\n\r\n\r\n\r\nexport default function Captain() {\r\n\r\n    window.onbeforeunload = () => setUser(\"\")\r\n    // const { setUser } = useContext(UserContext);\r\n    const classes = useStyles();\r\n    const [selectedViceCaptain, SetSelectedViceCaptain] = useState(\"\");\r\n    const [selectedCaptain, SetSelectedCaptain] = useState(\"\");\r\n    const [myTeamTableData, setMyTeamTableData] = useState([]);\r\n    const [tournamentStated, setTournamentStarted] = useState(false);\r\n    //const [ errorMessage, setErrorMessage ] = React.useState(\"\");\r\n    //const [backDropOpen, setBackDropOpen] = React.useState(false);\r\n    //const [userMessage, setUserMessage] = React.useState(\"\");\r\n    const [registerStatus, setRegisterStatus] = useState(0);\r\n\r\n    useEffect(() => {\r\n        const a = async () => {\r\n            if  (!hasGroup()) {\r\n                // handle if not a member of any group\r\n                return;\r\n            }\r\n\r\n            // console.log(\"Calling getcaptain\")\r\n            // get start of tournamnet (i.e. start of 1st match)\r\n            var gameStarted = false;  \r\n            var mygroup  = localStorage.getItem(\"gid\")\r\n            var response = await axios.get(`${process.env.REACT_APP_AXIOS_BASEPATH}/group/gamestarted/${localStorage.getItem(\"gid\")}`);\r\n            gameStarted = (response.data.length > 0);\r\n            setTournamentStarted(gameStarted);\r\n\r\n\r\n            var response = await axios.get(`${process.env.REACT_APP_AXIOS_BASEPATH}/user/getcaptain/${mygroup}/${localStorage.getItem(\"uid\")}`);\r\n            // console.log(response.data[0]);\r\n            if (response.data.length > 0) {\r\n                SetSelectedCaptain(response.data[0].captainName);\r\n                SetSelectedViceCaptain(response.data[0].viceCaptainName)\r\n            }\r\n\r\n            // get list of player purchased by user for aelecting captain / vice captain\r\n            var myUrl = `${process.env.REACT_APP_AXIOS_BASEPATH}/user/myteamwos/${mygroup}/${localStorage.getItem(\"uid\")}`;\r\n            const teamResponse = await axios.get(myUrl);\r\n            setMyTeamTableData(teamResponse.data[0].players);\r\n            // console.log(teamResponse.data[0].players) ;\r\n            \r\n\r\n        }\r\n        a();\r\n    }, [])\r\n\r\n    function ShowResisterStatus() {\r\n        // console.log(`Status is ${registerStatus}`);\r\n        let myMsg;\r\n        let errmsg = true;\r\n        switch (registerStatus) { \r\n          case 200:\r\n            myMsg = \"Successfully updated Captain / ViceCaptain details\";\r\n            errmsg = false;\r\n            break;\r\n          case 0:\r\n            myMsg = \"\";\r\n            errmsg = false;\r\n            break;\r\n          default:\r\n            myMsg = \"Error updating Captain / ViceCaptain details\";\r\n            break;\r\n        }\r\n        let myClass = (errmsg) ? classes.error : classes.root;\r\n        return(\r\n          <div>\r\n            <Typography align=\"center\" className={myClass}>{myMsg}</Typography>\r\n          </div>\r\n        );\r\n      }\r\n    \r\n    \r\n   \r\n    function handleSelectedCaptain(newCap) {\r\n        setRegisterStatus(0);\r\n        if (!tournamentStated)\r\n        if (newCap !== selectedViceCaptain)\r\n            SetSelectedCaptain(newCap);\r\n    };\r\n\r\n    function handleSelectedViceCaptain(newViceCap) {\r\n        setRegisterStatus(0);\r\n        if (!tournamentStated)\r\n        if (newViceCap !== selectedCaptain)\r\n            SetSelectedViceCaptain(newViceCap);\r\n    };\r\n\r\n\r\n    async function updateCaptain() {\r\n        // console.log(\"upd captin vc details\");\r\n        var tmp1 = myTeamTableData.find(x => x.playerName === selectedCaptain);\r\n        var tmp2 = myTeamTableData.find(x => x.playerName === selectedViceCaptain);\r\n        var myUrl = `${process.env.REACT_APP_AXIOS_BASEPATH}/user/captainvicecaptain/${localStorage.getItem(\"gid\")}/${localStorage.getItem(\"uid\")}/${tmp1.pid}/${tmp2.pid}`;\r\n        // console.log(myUrl);\r\n        const resp = await  axios.get(myUrl);\r\n        // console.log(resp.status)\r\n        setRegisterStatus(resp.status);\r\n        // if (resp.status === 200) {\r\n        //     // setErrorMessage(\"Successfully updated Captain / ViceCaptain details\");\r\n        //     setUserMessage(\"Successfully updated Captain / ViceCaptain details\");\r\n        // } else {\r\n        // //    setErrorMessage(\"Error updating Captain / ViceCaptain details\");\r\n        //    setUserMessage(\"Error updating Captain / ViceCaptain details\");\r\n        // }\r\n        // setBackDropOpen(true);\r\n        // setTimeout(() => setBackDropOpen(false), process.env.REACT_APP_MESSAGE_TIME);\r\n    }\r\n\r\n\r\n\r\n    function DisplayCaptainSelectButton() {\r\n        return (\r\n        <div align=\"center\">\r\n        <Button variant=\"contained\" color=\"primary\" size=\"small\"\r\n            disabled={tournamentStated}\r\n            className={classes.button} onClick={updateCaptain}>Update\r\n        </Button>\r\n        </div>\r\n        );\r\n    }\r\n\r\n    function ShowCaptainViceCaptain() {\r\n        return(\r\n        <Table\r\n            tableKey=\"t-cvc\"\r\n            id=\"t-cvc\"\r\n            size=\"small\"\r\n            tableHeaderColor=\"warning\"\r\n            tableHead={[\"Player Name\", \"Captain\", \"Vice Captain\"]}\r\n            tableData={myTeamTableData.map(x => {\r\n                const arr = [\r\n                    x.playerName,\r\n                    <FormControlLabel \r\n                    key={cPrefix+x.playerName}\r\n                    id={cPrefix+x.playerName}\r\n                    className={classes.captain} \r\n                    value={x.playerName}    \r\n                    control={<Radio color=\"primary\" key={cPrefix+x.playerName} id={cPrefix+x.playerName} defaultChecked={x.playerName === selectedCaptain}/>}\r\n                    onClick={() => handleSelectedCaptain(x.playerName)}\r\n                    checked={selectedCaptain === x.playerName}\r\n                    disabled={tournamentStated}\r\n                    />,\r\n                    <FormControlLabel \r\n                    key={vcPrefix+x.playerName}\r\n                    id={vcPrefix+x.playerName}\r\n                    className={classes.captain} \r\n                    value={x.playerName}    \r\n                    control={<Radio color=\"primary\" key={vcPrefix+x.playerName} id={cPrefix+x.playerName} defaultChecked={x.playerName === selectedViceCaptain}/>}\r\n                    onClick={() => handleSelectedViceCaptain(x.playerName)}\r\n                    checked={selectedViceCaptain === x.playerName}\r\n                    disabled={tournamentStated}\r\n                    />\r\n                ]\r\n                return { data: arr, key: \"pid\", collapse: [] }\r\n            })}\r\n        />\r\n        );\r\n    };\r\n\r\n    function DisplayTournamentStarted() {\r\n        if (tournamentStated)\r\n            return (\r\n                <Typography className={classes.error} align=\"center\">(cannot update after tournament has started.)</Typography>\r\n            );\r\n        else\r\n            return(<div></div>);\r\n    }\r\n\r\n\r\n    if (hasGroup())\r\n        return (\r\n        <div className={classes.root} key=\"cpataininfo\">\r\n            {/* <h3 align=\"center\">Captain and Vice Captain ({localStorage.getItem(\"tournament\")})</h3> */}\r\n            {/* <h3 className={classes.hdrText} align=\"center\">Captain/ViceCaptain</h3> */}\r\n            {/* <Typography align=\"center\" component=\"h1\" variant=\"h5\">Captain/ViceCaptain</Typography> */}\r\n            {/* <DisplayGroupName groupName={localStorage.getItem(\"groupName\")}/> */}\r\n            <DisplayPageHeader headerName=\"Captain/ViceCaptain\" groupName={localStorage.getItem(\"groupName\")} tournament={localStorage.getItem(\"tournament\")}/>\r\n            <DisplayTournamentStarted/>\r\n            <ShowCaptainViceCaptain/>\r\n            <BlankArea/>\r\n            <ShowResisterStatus/>\r\n            <BlankArea/>\r\n            <DisplayCaptainSelectButton/>\r\n            {/* <MessageToUser mtuOpen={backDropOpen} mtuClose={setBackDropOpen} mtuMessage={userMessage} /> */}\r\n        </div>\r\n        );\r\n    else\r\n        return <NoGroup/>;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}