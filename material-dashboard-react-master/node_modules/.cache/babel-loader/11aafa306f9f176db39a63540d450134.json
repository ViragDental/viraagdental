{"ast":null,"code":"import _regeneratorRuntime from\"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from'react';import axios from\"axios\";import{makeStyles}from'@material-ui/core/styles';// import { Switch, Route, Link } from 'react-router-dom';\nimport Button from'@material-ui/core/Button';import Table from\"components/Table/Table.js\";import Typography from'@material-ui/core/Typography';// import TableRow from '@material-ui/core/TableRow';\n// import TableCell from '@material-ui/core/TableCell';\nimport FormControlLabel from'@material-ui/core/FormControlLabel';import Radio from'@material-ui/core/Radio';// import Grid from \"@material-ui/core/Grid\";\n// import GridItem from \"components/Grid/GridItem.js\";\n// import Card from \"components/Card/Card.js\";\n// import CardBody from \"components/Card/CardBody.js\";\nimport{UserContext}from\"../../UserContext\";import{NoGroup,DisplayPageHeader}from'CustomComponents/CustomComponents.js';import{hasGroup}from'views/functions';import{red,blue}from'@material-ui/core/colors';import{updateLanguageServiceSourceFile}from'typescript';var vcPrefix=\"vicecaptain-\";var cPrefix=\"captain-\";var useStyles=makeStyles(function(theme){return{root:{width:'100%'},captain:{color:\"yellow\"},heading:{fontSize:theme.typography.pxToRem(15),flexBasis:'33.33%',flexShrink:0},secondaryHeading:{fontSize:theme.typography.pxToRem(15),color:theme.palette.text.secondary},error:{// right: 0,\nfontSize:'12px',color:red[700],// position: 'absolute',\nalignItems:'center',marginTop:'0px'},updatemsg:{// right: 0,\nfontSize:'12px',color:blue[700],// position: 'absolute',\nalignItems:'center',marginTop:'0px'},hdrText:{// right: 0,\n// fontSize: '12px',\n// color: red[700],\n// // position: 'absolute',\nalign:'center',marginTop:'0px',marginBottom:'0px'}};});export default function Group(){window.onbeforeunload=function(){return setUser(null);};var _useContext=useContext(UserContext),setUser=_useContext.setUser;var classes=useStyles();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),selectedViceCaptain=_useState2[0],SetSelectedViceCaptain=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),selectedCaptain=_useState4[0],SetSelectedCaptain=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),myTeamTableData=_useState6[0],setMyTeamTableData=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),tournamentStated=_useState8[0],setTournamentStarted=_useState8[1];var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),errorMessage=_React$useState2[0],setErrorMessage=_React$useState2[1];useEffect(function(){var a=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var gameStarted,mygroup,response,myUrl,teamResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(hasGroup()){_context.next=2;break;}return _context.abrupt(\"return\");case 2:// console.log(\"Calling getcaptain\")\n// get start of tournamnet (i.e. start of 1st match)\ngameStarted=false;mygroup=localStorage.getItem(\"gid\");_context.next=6;return axios.get(\"/group/gamestarted/\".concat(localStorage.getItem(\"gid\")));case 6:response=_context.sent;gameStarted=response.data.length>0;setTournamentStarted(gameStarted);_context.next=11;return axios.get(\"/user/getcaptain/\".concat(mygroup,\"/\").concat(localStorage.getItem(\"uid\")));case 11:response=_context.sent;// console.log(response.data[0]);\nif(response.data.length>0){SetSelectedCaptain(response.data[0].captainName);SetSelectedViceCaptain(response.data[0].viceCaptainName);}// get list of player purchased by user for aelecting captain / vice captain\nmyUrl=\"/user/myteamwos/\".concat(mygroup,\"/\").concat(localStorage.getItem(\"uid\"));_context.next=16;return axios.get(myUrl);case 16:teamResponse=_context.sent;setMyTeamTableData(teamResponse.data[0].players);// console.log(teamResponse.data[0].players) ;\ncase 18:case\"end\":return _context.stop();}}},_callee);}));return function a(){return _ref.apply(this,arguments);};}();a();},[]);function handleSelectedCaptain(newCap){if(!tournamentStated)if(newCap!==selectedViceCaptain)SetSelectedCaptain(newCap);};function handleSelectedViceCaptain(newViceCap){if(!tournamentStated)if(newViceCap!==selectedCaptain)SetSelectedViceCaptain(newViceCap);};function updateCaptain(){return _updateCaptain.apply(this,arguments);}function _updateCaptain(){_updateCaptain=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var tmp1,tmp2,myUrl,resp;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// console.log(\"upd captin vc details\");\ntmp1=myTeamTableData.find(function(x){return x.playerName===selectedCaptain;});tmp2=myTeamTableData.find(function(x){return x.playerName===selectedViceCaptain;});myUrl=\"/user/captainvicecaptain/\".concat(localStorage.getItem(\"gid\"),\"/\").concat(localStorage.getItem(\"uid\"),\"/\").concat(tmp1.pid,\"/\").concat(tmp2.pid);// console.log(myUrl);\n_context2.next=5;return axios.get(myUrl);case 5:resp=_context2.sent;// console.log(resp.status)\nif(resp.status===200)setErrorMessage(\"Successfully updated Captain / ViceCaptain details\");else setErrorMessage(\"Error updating Captain / ViceCaptain details\");case 7:case\"end\":return _context2.stop();}}},_callee2);}));return _updateCaptain.apply(this,arguments);}function DisplayCaptainSelectButton(){return/*#__PURE__*/React.createElement(\"div\",{align:\"center\"},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",size:\"small\",disabled:tournamentStated,className:classes.button,onClick:updateCaptain},\"Update\"));}function ShowCaptainViceCaptain(){return/*#__PURE__*/React.createElement(Table,{tableKey:\"t-cvc\",id:\"t-cvc\",size:\"small\",tableHeaderColor:\"warning\",tableHead:[\"Player Name\",\"Captain\",\"Vice Captain\"],tableData:myTeamTableData.map(function(x){var arr=[x.playerName,/*#__PURE__*/React.createElement(FormControlLabel,{key:cPrefix+x.playerName,id:cPrefix+x.playerName,className:classes.captain,value:x.playerName,control:/*#__PURE__*/React.createElement(Radio,{color:\"primary\",key:cPrefix+x.playerName,id:cPrefix+x.playerName,defaultChecked:x.playerName===selectedCaptain}),onClick:function onClick(){return handleSelectedCaptain(x.playerName);},checked:selectedCaptain===x.playerName,disabled:tournamentStated}),/*#__PURE__*/React.createElement(FormControlLabel,{key:vcPrefix+x.playerName,id:vcPrefix+x.playerName,className:classes.captain,value:x.playerName,control:/*#__PURE__*/React.createElement(Radio,{color:\"primary\",key:vcPrefix+x.playerName,id:cPrefix+x.playerName,defaultChecked:x.playerName===selectedViceCaptain}),onClick:function onClick(){return handleSelectedViceCaptain(x.playerName);},checked:selectedViceCaptain===x.playerName,disabled:tournamentStated})];return{data:arr,key:\"pid\",collapse:[]};})});};function DisplayTournamentStarted(){if(tournamentStated)return/*#__PURE__*/React.createElement(Typography,{className:classes.error,align:\"center\"},\"(cannot update after tournament has started.)\");else return/*#__PURE__*/React.createElement(\"div\",null);}if(hasGroup())return/*#__PURE__*/React.createElement(\"div\",{className:classes.root,key:\"cpataininfo\"},/*#__PURE__*/React.createElement(DisplayPageHeader,{headerName:\"Captain/ViceCaptain\",groupName:localStorage.getItem(\"groupName\")}),/*#__PURE__*/React.createElement(DisplayTournamentStarted,null),/*#__PURE__*/React.createElement(ShowCaptainViceCaptain,null),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Typography,{className:classes.updatemsg,align:\"left\"},errorMessage)),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(DisplayCaptainSelectButton,null));else return/*#__PURE__*/React.createElement(NoGroup,null);}","map":{"version":3,"sources":["D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/src/views/Captain/Captain.js"],"names":["React","useEffect","useState","useContext","axios","makeStyles","Button","Table","Typography","FormControlLabel","Radio","UserContext","NoGroup","DisplayPageHeader","hasGroup","red","blue","updateLanguageServiceSourceFile","vcPrefix","cPrefix","useStyles","theme","root","width","captain","color","heading","fontSize","typography","pxToRem","flexBasis","flexShrink","secondaryHeading","palette","text","secondary","error","alignItems","marginTop","updatemsg","hdrText","align","marginBottom","Group","window","onbeforeunload","setUser","classes","selectedViceCaptain","SetSelectedViceCaptain","selectedCaptain","SetSelectedCaptain","myTeamTableData","setMyTeamTableData","tournamentStated","setTournamentStarted","errorMessage","setErrorMessage","a","gameStarted","mygroup","localStorage","getItem","get","response","data","length","captainName","viceCaptainName","myUrl","teamResponse","players","handleSelectedCaptain","newCap","handleSelectedViceCaptain","newViceCap","updateCaptain","tmp1","find","x","playerName","tmp2","pid","resp","status","DisplayCaptainSelectButton","button","ShowCaptainViceCaptain","map","arr","key","collapse","DisplayTournamentStarted"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport axios from \"axios\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n// import { Switch, Route, Link } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport Table from \"components/Table/Table.js\";\r\nimport Typography from '@material-ui/core/Typography';\r\n// import TableRow from '@material-ui/core/TableRow';\r\n// import TableCell from '@material-ui/core/TableCell';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Radio from '@material-ui/core/Radio';\r\n// import Grid from \"@material-ui/core/Grid\";\r\n// import GridItem from \"components/Grid/GridItem.js\";\r\n// import Card from \"components/Card/Card.js\";\r\n// import CardBody from \"components/Card/CardBody.js\";\r\nimport { UserContext } from \"../../UserContext\";\r\nimport { NoGroup, DisplayPageHeader } from 'CustomComponents/CustomComponents.js';\r\nimport { hasGroup } from 'views/functions';\r\nimport { red, blue } from '@material-ui/core/colors';\r\nimport { updateLanguageServiceSourceFile } from 'typescript';\r\nconst vcPrefix = \"vicecaptain-\"\r\nconst cPrefix = \"captain-\"\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      width: '100%',\r\n    },\r\n    captain: {\r\n        color: \"yellow\",\r\n    },     \r\n    heading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      flexBasis: '33.33%',\r\n      flexShrink: 0,\r\n    },\r\n    secondaryHeading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      color: theme.palette.text.secondary,\r\n    },\r\n    error:  {\r\n        // right: 0,\r\n        fontSize: '12px',\r\n        color: red[700],\r\n        // position: 'absolute',\r\n        alignItems: 'center',\r\n        marginTop: '0px',\r\n    },\r\n    updatemsg:  {\r\n        // right: 0,\r\n        fontSize: '12px',\r\n        color: blue[700],\r\n        // position: 'absolute',\r\n        alignItems: 'center',\r\n        marginTop: '0px',\r\n    },\r\n    hdrText:  {\r\n        // right: 0,\r\n        // fontSize: '12px',\r\n        // color: red[700],\r\n        // // position: 'absolute',\r\n        align: 'center',\r\n        marginTop: '0px',\r\n        marginBottom: '0px',\r\n    },\r\n\r\n    }));\r\n\r\n\r\n\r\nexport default function Group() {\r\n\r\n    window.onbeforeunload = () => setUser(null)\r\n    const { setUser } = useContext(UserContext);\r\n    const classes = useStyles();\r\n    const [selectedViceCaptain, SetSelectedViceCaptain] = useState(\"\");\r\n    const [selectedCaptain, SetSelectedCaptain] = useState(\"\");\r\n    const [myTeamTableData, setMyTeamTableData] = useState([]);\r\n    const [tournamentStated, setTournamentStarted] = useState(false);\r\n    const [ errorMessage, setErrorMessage ] = React.useState(\"\");\r\n\r\n\r\n      \r\n    useEffect(() => {\r\n        const a = async () => {\r\n            if  (!hasGroup()) {\r\n                // handle if not a member of any group\r\n                return;\r\n            }\r\n\r\n            // console.log(\"Calling getcaptain\")\r\n            // get start of tournamnet (i.e. start of 1st match)\r\n            var gameStarted = false;  \r\n            var mygroup  = localStorage.getItem(\"gid\")\r\n            var response = await axios.get(`/group/gamestarted/${localStorage.getItem(\"gid\")}`);\r\n            gameStarted = (response.data.length > 0);\r\n            setTournamentStarted(gameStarted);\r\n\r\n\r\n            var response = await axios.get(`/user/getcaptain/${mygroup}/${localStorage.getItem(\"uid\")}`);\r\n            // console.log(response.data[0]);\r\n            if (response.data.length > 0) {\r\n                SetSelectedCaptain(response.data[0].captainName);\r\n                SetSelectedViceCaptain(response.data[0].viceCaptainName)\r\n            }\r\n\r\n            // get list of player purchased by user for aelecting captain / vice captain\r\n            var myUrl = `/user/myteamwos/${mygroup}/${localStorage.getItem(\"uid\")}`;\r\n            const teamResponse = await axios.get(myUrl);\r\n            setMyTeamTableData(teamResponse.data[0].players);\r\n            // console.log(teamResponse.data[0].players) ;\r\n            \r\n\r\n        }\r\n        a();\r\n    }, [])\r\n\r\n   \r\n    function handleSelectedCaptain(newCap) {\r\n        if (!tournamentStated)\r\n        if (newCap !== selectedViceCaptain)\r\n            SetSelectedCaptain(newCap);\r\n    };\r\n\r\n    function handleSelectedViceCaptain(newViceCap) {\r\n        if (!tournamentStated)\r\n        if (newViceCap !== selectedCaptain)\r\n            SetSelectedViceCaptain(newViceCap);\r\n    };\r\n\r\n\r\n    async function updateCaptain() {\r\n        // console.log(\"upd captin vc details\");\r\n        var tmp1 = myTeamTableData.find(x => x.playerName === selectedCaptain);\r\n        var tmp2 = myTeamTableData.find(x => x.playerName === selectedViceCaptain);\r\n        var myUrl = `/user/captainvicecaptain/${localStorage.getItem(\"gid\")}/${localStorage.getItem(\"uid\")}/${tmp1.pid}/${tmp2.pid}`;\r\n        // console.log(myUrl);\r\n        const resp = await  axios.get(myUrl);\r\n        // console.log(resp.status)\r\n        if (resp.status === 200)\r\n            setErrorMessage(\"Successfully updated Captain / ViceCaptain details\");\r\n        else\r\n           setErrorMessage(\"Error updating Captain / ViceCaptain details\");\r\n    }\r\n\r\n\r\n\r\n    function DisplayCaptainSelectButton() {\r\n        return (\r\n        <div align=\"center\">\r\n        <Button variant=\"contained\" color=\"primary\" size=\"small\"\r\n            disabled={tournamentStated}\r\n            className={classes.button} onClick={updateCaptain}>Update\r\n        </Button>\r\n        </div>\r\n        );\r\n    }\r\n\r\n    function ShowCaptainViceCaptain() {\r\n        return(\r\n        <Table\r\n            tableKey=\"t-cvc\"\r\n            id=\"t-cvc\"\r\n            size=\"small\"\r\n            tableHeaderColor=\"warning\"\r\n            tableHead={[\"Player Name\", \"Captain\", \"Vice Captain\"]}\r\n            tableData={myTeamTableData.map(x => {\r\n                const arr = [\r\n                    x.playerName,\r\n                    <FormControlLabel \r\n                    key={cPrefix+x.playerName}\r\n                    id={cPrefix+x.playerName}\r\n                    className={classes.captain} \r\n                    value={x.playerName}    \r\n                    control={<Radio color=\"primary\" key={cPrefix+x.playerName} id={cPrefix+x.playerName} defaultChecked={x.playerName === selectedCaptain}/>}\r\n                    onClick={() => handleSelectedCaptain(x.playerName)}\r\n                    checked={selectedCaptain === x.playerName}\r\n                    disabled={tournamentStated}\r\n                    />,\r\n                    <FormControlLabel \r\n                    key={vcPrefix+x.playerName}\r\n                    id={vcPrefix+x.playerName}\r\n                    className={classes.captain} \r\n                    value={x.playerName}    \r\n                    control={<Radio color=\"primary\" key={vcPrefix+x.playerName} id={cPrefix+x.playerName} defaultChecked={x.playerName === selectedViceCaptain}/>}\r\n                    onClick={() => handleSelectedViceCaptain(x.playerName)}\r\n                    checked={selectedViceCaptain === x.playerName}\r\n                    disabled={tournamentStated}\r\n                    />\r\n                ]\r\n                return { data: arr, key: \"pid\", collapse: [] }\r\n            })}\r\n        />\r\n        );\r\n    };\r\n\r\n    function DisplayTournamentStarted() {\r\n        if (tournamentStated)\r\n            return (\r\n                <Typography className={classes.error} align=\"center\">(cannot update after tournament has started.)</Typography>\r\n            );\r\n        else\r\n            return(<div></div>);\r\n    }\r\n\r\n\r\n    if (hasGroup())\r\n        return (\r\n        <div className={classes.root} key=\"cpataininfo\">\r\n            {/* <h3 align=\"center\">Captain and Vice Captain ({localStorage.getItem(\"tournament\")})</h3> */}\r\n            {/* <h3 className={classes.hdrText} align=\"center\">Captain/ViceCaptain</h3> */}\r\n            {/* <Typography align=\"center\" component=\"h1\" variant=\"h5\">Captain/ViceCaptain</Typography> */}\r\n            {/* <DisplayGroupName groupName={localStorage.getItem(\"groupName\")}/> */}\r\n            <DisplayPageHeader headerName=\"Captain/ViceCaptain\" groupName={localStorage.getItem(\"groupName\")}/>\r\n            <DisplayTournamentStarted/>\r\n            <ShowCaptainViceCaptain/>\r\n            <div>\r\n                <Typography className={classes.updatemsg} align=\"left\">{errorMessage}</Typography>\r\n            </div>\r\n            <br/>\r\n            <DisplayCaptainSelectButton/>\r\n        </div>\r\n        );\r\n    else\r\n        return <NoGroup/>;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}