{"ast":null,"code":"import _regeneratorRuntime from \"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\projects\\\\Cricket\\\\akshu close\\\\IPL\\\\material-dashboard-react-master\\\\src\\\\views\\\\Captain\\\\Captain.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport axios from \"axios\";\nimport { makeStyles } from '@material-ui/core/styles'; // import { Switch, Route, Link } from 'react-router-dom';\n\nimport Button from '@material-ui/core/Button';\nimport Table from \"components/Table/Table.js\";\nimport Typography from '@material-ui/core/Typography'; // import TableRow from '@material-ui/core/TableRow';\n// import TableCell from '@material-ui/core/TableCell';\n\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Radio from '@material-ui/core/Radio'; // import Grid from \"@material-ui/core/Grid\";\n// import GridItem from \"components/Grid/GridItem.js\";\n// import Card from \"components/Card/Card.js\";\n// import CardBody from \"components/Card/CardBody.js\";\n\nimport { UserContext } from \"../../UserContext\";\nimport { NoGroup, DisplayPageHeader, MessageToUser } from 'CustomComponents/CustomComponents.js';\nimport { hasGroup } from 'views/functions';\nimport { red, blue } from '@material-ui/core/colors';\nimport { updateLanguageServiceSourceFile } from 'typescript';\nvar vcPrefix = \"vicecaptain-\";\nvar cPrefix = \"captain-\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      width: '100%'\n    },\n    captain: {\n      color: \"yellow\"\n    },\n    heading: {\n      fontSize: theme.typography.pxToRem(15),\n      flexBasis: '33.33%',\n      flexShrink: 0\n    },\n    secondaryHeading: {\n      fontSize: theme.typography.pxToRem(15),\n      color: theme.palette.text.secondary\n    },\n    error: {\n      // right: 0,\n      fontSize: '12px',\n      color: red[700],\n      // position: 'absolute',\n      alignItems: 'center',\n      marginTop: '0px'\n    },\n    updatemsg: {\n      // right: 0,\n      fontSize: '12px',\n      color: blue[700],\n      // position: 'absolute',\n      alignItems: 'center',\n      marginTop: '0px'\n    },\n    hdrText: {\n      // right: 0,\n      // fontSize: '12px',\n      // color: red[700],\n      // // position: 'absolute',\n      align: 'center',\n      marginTop: '0px',\n      marginBottom: '0px'\n    }\n  };\n});\nexport default function Group() {\n  _s();\n\n  window.onbeforeunload = function () {\n    return setUser(null);\n  };\n\n  var _useContext = useContext(UserContext),\n      setUser = _useContext.setUser;\n\n  var classes = useStyles();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedViceCaptain = _useState2[0],\n      SetSelectedViceCaptain = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedCaptain = _useState4[0],\n      SetSelectedCaptain = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      myTeamTableData = _useState6[0],\n      setMyTeamTableData = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      tournamentStated = _useState8[0],\n      setTournamentStarted = _useState8[1];\n\n  var _React$useState = React.useState(\"\"),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      errorMessage = _React$useState2[0],\n      setErrorMessage = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      backDropOpen = _React$useState4[0],\n      setBackDropOpen = _React$useState4[1];\n\n  var _React$useState5 = React.useState(\"\"),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      userMessage = _React$useState6[0],\n      setUserMessage = _React$useState6[1];\n\n  useEffect(function () {\n    var a = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var gameStarted, mygroup, response, myUrl, teamResponse;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (hasGroup()) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                // console.log(\"Calling getcaptain\")\n                // get start of tournamnet (i.e. start of 1st match)\n                gameStarted = false;\n                mygroup = localStorage.getItem(\"gid\");\n                _context.next = 6;\n                return axios.get(\"/group/gamestarted/\".concat(localStorage.getItem(\"gid\")));\n\n              case 6:\n                response = _context.sent;\n                gameStarted = response.data.length > 0;\n                setTournamentStarted(gameStarted);\n                _context.next = 11;\n                return axios.get(\"/user/getcaptain/\".concat(mygroup, \"/\").concat(localStorage.getItem(\"uid\")));\n\n              case 11:\n                response = _context.sent;\n\n                // console.log(response.data[0]);\n                if (response.data.length > 0) {\n                  SetSelectedCaptain(response.data[0].captainName);\n                  SetSelectedViceCaptain(response.data[0].viceCaptainName);\n                } // get list of player purchased by user for aelecting captain / vice captain\n\n\n                myUrl = \"/user/myteamwos/\".concat(mygroup, \"/\").concat(localStorage.getItem(\"uid\"));\n                _context.next = 16;\n                return axios.get(myUrl);\n\n              case 16:\n                teamResponse = _context.sent;\n                setMyTeamTableData(teamResponse.data[0].players); // console.log(teamResponse.data[0].players) ;\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function a() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    a();\n  }, []);\n\n  function handleSelectedCaptain(newCap) {\n    if (!tournamentStated) if (newCap !== selectedViceCaptain) SetSelectedCaptain(newCap);\n  }\n\n  ;\n\n  function handleSelectedViceCaptain(newViceCap) {\n    if (!tournamentStated) if (newViceCap !== selectedCaptain) SetSelectedViceCaptain(newViceCap);\n  }\n\n  ;\n\n  function updateCaptain() {\n    return _updateCaptain.apply(this, arguments);\n  }\n\n  function _updateCaptain() {\n    _updateCaptain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var tmp1, tmp2, myUrl, resp;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              // console.log(\"upd captin vc details\");\n              tmp1 = myTeamTableData.find(function (x) {\n                return x.playerName === selectedCaptain;\n              });\n              tmp2 = myTeamTableData.find(function (x) {\n                return x.playerName === selectedViceCaptain;\n              });\n              myUrl = \"/user/captainvicecaptain/\".concat(localStorage.getItem(\"gid\"), \"/\").concat(localStorage.getItem(\"uid\"), \"/\").concat(tmp1.pid, \"/\").concat(tmp2.pid); // console.log(myUrl);\n\n              _context2.next = 5;\n              return axios.get(myUrl);\n\n            case 5:\n              resp = _context2.sent;\n\n              // console.log(resp.status)\n              if (resp.status === 200) {\n                // setErrorMessage(\"Successfully updated Captain / ViceCaptain details\");\n                setUserMessage(\"Successfully updated Captain / ViceCaptain details\");\n              } else {\n                //    setErrorMessage(\"Error updating Captain / ViceCaptain details\");\n                setUserMessage(\"Error updating Captain / ViceCaptain details\");\n              }\n\n              setBackDropOpen(true);\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _updateCaptain.apply(this, arguments);\n  }\n\n  function DisplayCaptainSelectButton() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      size: \"small\",\n      disabled: tournamentStated,\n      className: classes.button,\n      onClick: updateCaptain,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }\n    }, \"Update\"));\n  }\n\n  function ShowCaptainViceCaptain() {\n    var _this = this;\n\n    return /*#__PURE__*/React.createElement(Table, {\n      tableKey: \"t-cvc\",\n      id: \"t-cvc\",\n      size: \"small\",\n      tableHeaderColor: \"warning\",\n      tableHead: [\"Player Name\", \"Captain\", \"Vice Captain\"],\n      tableData: myTeamTableData.map(function (x) {\n        var arr = [x.playerName, /*#__PURE__*/React.createElement(FormControlLabel, {\n          key: cPrefix + x.playerName,\n          id: cPrefix + x.playerName,\n          className: classes.captain,\n          value: x.playerName,\n          control: /*#__PURE__*/React.createElement(Radio, {\n            color: \"primary\",\n            key: cPrefix + x.playerName,\n            id: cPrefix + x.playerName,\n            defaultChecked: x.playerName === selectedCaptain,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 30\n            }\n          }),\n          onClick: function onClick() {\n            return handleSelectedCaptain(x.playerName);\n          },\n          checked: selectedCaptain === x.playerName,\n          disabled: tournamentStated,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 21\n          }\n        }), /*#__PURE__*/React.createElement(FormControlLabel, {\n          key: vcPrefix + x.playerName,\n          id: vcPrefix + x.playerName,\n          className: classes.captain,\n          value: x.playerName,\n          control: /*#__PURE__*/React.createElement(Radio, {\n            color: \"primary\",\n            key: vcPrefix + x.playerName,\n            id: cPrefix + x.playerName,\n            defaultChecked: x.playerName === selectedViceCaptain,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 30\n            }\n          }),\n          onClick: function onClick() {\n            return handleSelectedViceCaptain(x.playerName);\n          },\n          checked: selectedViceCaptain === x.playerName,\n          disabled: tournamentStated,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 21\n          }\n        })];\n        return {\n          data: arr,\n          key: \"pid\",\n          collapse: []\n        };\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }\n    });\n  }\n\n  ;\n\n  function DisplayTournamentStarted() {\n    if (tournamentStated) return /*#__PURE__*/React.createElement(Typography, {\n      className: classes.error,\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }\n    }, \"(cannot update after tournament has started.)\");else return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 20\n      }\n    });\n  }\n\n  if (hasGroup()) return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    key: \"cpataininfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DisplayPageHeader, {\n    headerName: \"Captain/ViceCaptain\",\n    groupName: localStorage.getItem(\"groupName\"),\n    tournament: localStorage.getItem(\"tournament\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(DisplayTournamentStarted, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(ShowCaptainViceCaptain, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(DisplayCaptainSelectButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(MessageToUser, {\n    mtuOpen: backDropOpen,\n    mtuClose: setBackDropOpen,\n    mtuMessage: userMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }\n  }));else return /*#__PURE__*/React.createElement(NoGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 16\n    }\n  });\n}\n\n_s(Group, \"/9AhgkAcZ5qOP/PUvADCkazJ4pQ=\", false, function () {\n  return [useStyles];\n});\n\n_c = Group;\n\nvar _c;\n\n$RefreshReg$(_c, \"Group\");","map":{"version":3,"sources":["D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/src/views/Captain/Captain.js"],"names":["React","useEffect","useState","useContext","axios","makeStyles","Button","Table","Typography","FormControlLabel","Radio","UserContext","NoGroup","DisplayPageHeader","MessageToUser","hasGroup","red","blue","updateLanguageServiceSourceFile","vcPrefix","cPrefix","useStyles","theme","root","width","captain","color","heading","fontSize","typography","pxToRem","flexBasis","flexShrink","secondaryHeading","palette","text","secondary","error","alignItems","marginTop","updatemsg","hdrText","align","marginBottom","Group","window","onbeforeunload","setUser","classes","selectedViceCaptain","SetSelectedViceCaptain","selectedCaptain","SetSelectedCaptain","myTeamTableData","setMyTeamTableData","tournamentStated","setTournamentStarted","errorMessage","setErrorMessage","backDropOpen","setBackDropOpen","userMessage","setUserMessage","a","gameStarted","mygroup","localStorage","getItem","get","response","data","length","captainName","viceCaptainName","myUrl","teamResponse","players","handleSelectedCaptain","newCap","handleSelectedViceCaptain","newViceCap","updateCaptain","tmp1","find","x","playerName","tmp2","pid","resp","status","DisplayCaptainSelectButton","button","ShowCaptainViceCaptain","map","arr","key","collapse","DisplayTournamentStarted"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,0BAA3B,C,CACA;;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,KAAP,MAAkB,2BAAlB;AACA,OAAOC,UAAP,MAAuB,8BAAvB,C,CACA;AACA;;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,OAAOC,KAAP,MAAkB,yBAAlB,C,CACA;AACA;AACA;AACA;;AACA,SAASC,WAAT,QAA4B,mBAA5B;AACA,SAASC,OAAT,EAAkBC,iBAAlB,EAAqCC,aAArC,QAA0D,sCAA1D;AACA,SAASC,QAAT,QAAyB,iBAAzB;AACA,SAASC,GAAT,EAAcC,IAAd,QAA0B,0BAA1B;AACA,SAASC,+BAAT,QAAgD,YAAhD;AACA,IAAMC,QAAQ,GAAG,cAAjB;AACA,IAAMC,OAAO,GAAG,UAAhB;AAGA,IAAMC,SAAS,GAAGhB,UAAU,CAAC,UAACiB,KAAD;AAAA,SAAY;AACrCC,IAAAA,IAAI,EAAE;AACJC,MAAAA,KAAK,EAAE;AADH,KAD+B;AAIrCC,IAAAA,OAAO,EAAE;AACLC,MAAAA,KAAK,EAAE;AADF,KAJ4B;AAOrCC,IAAAA,OAAO,EAAE;AACPC,MAAAA,QAAQ,EAAEN,KAAK,CAACO,UAAN,CAAiBC,OAAjB,CAAyB,EAAzB,CADH;AAEPC,MAAAA,SAAS,EAAE,QAFJ;AAGPC,MAAAA,UAAU,EAAE;AAHL,KAP4B;AAYrCC,IAAAA,gBAAgB,EAAE;AAChBL,MAAAA,QAAQ,EAAEN,KAAK,CAACO,UAAN,CAAiBC,OAAjB,CAAyB,EAAzB,CADM;AAEhBJ,MAAAA,KAAK,EAAEJ,KAAK,CAACY,OAAN,CAAcC,IAAd,CAAmBC;AAFV,KAZmB;AAgBrCC,IAAAA,KAAK,EAAG;AACJ;AACAT,MAAAA,QAAQ,EAAE,MAFN;AAGJF,MAAAA,KAAK,EAAEV,GAAG,CAAC,GAAD,CAHN;AAIJ;AACAsB,MAAAA,UAAU,EAAE,QALR;AAMJC,MAAAA,SAAS,EAAE;AANP,KAhB6B;AAwBrCC,IAAAA,SAAS,EAAG;AACR;AACAZ,MAAAA,QAAQ,EAAE,MAFF;AAGRF,MAAAA,KAAK,EAAET,IAAI,CAAC,GAAD,CAHH;AAIR;AACAqB,MAAAA,UAAU,EAAE,QALJ;AAMRC,MAAAA,SAAS,EAAE;AANH,KAxByB;AAgCrCE,IAAAA,OAAO,EAAG;AACN;AACA;AACA;AACA;AACAC,MAAAA,KAAK,EAAE,QALD;AAMNH,MAAAA,SAAS,EAAE,KANL;AAONI,MAAAA,YAAY,EAAE;AAPR;AAhC2B,GAAZ;AAAA,CAAD,CAA5B;AA8CA,eAAe,SAASC,KAAT,GAAiB;AAAA;;AAE5BC,EAAAA,MAAM,CAACC,cAAP,GAAwB;AAAA,WAAMC,OAAO,CAAC,IAAD,CAAb;AAAA,GAAxB;;AAF4B,oBAGR5C,UAAU,CAACQ,WAAD,CAHF;AAAA,MAGpBoC,OAHoB,eAGpBA,OAHoB;;AAI5B,MAAMC,OAAO,GAAG3B,SAAS,EAAzB;;AAJ4B,kBAK0BnB,QAAQ,CAAC,EAAD,CALlC;AAAA;AAAA,MAKrB+C,mBALqB;AAAA,MAKAC,sBALA;;AAAA,mBAMkBhD,QAAQ,CAAC,EAAD,CAN1B;AAAA;AAAA,MAMrBiD,eANqB;AAAA,MAMJC,kBANI;;AAAA,mBAOkBlD,QAAQ,CAAC,EAAD,CAP1B;AAAA;AAAA,MAOrBmD,eAPqB;AAAA,MAOJC,kBAPI;;AAAA,mBAQqBpD,QAAQ,CAAC,KAAD,CAR7B;AAAA;AAAA,MAQrBqD,gBARqB;AAAA,MAQHC,oBARG;;AAAA,wBAScxD,KAAK,CAACE,QAAN,CAAe,EAAf,CATd;AAAA;AAAA,MASpBuD,YAToB;AAAA,MASNC,eATM;;AAAA,yBAUY1D,KAAK,CAACE,QAAN,CAAe,KAAf,CAVZ;AAAA;AAAA,MAUrByD,YAVqB;AAAA,MAUPC,eAVO;;AAAA,yBAWU5D,KAAK,CAACE,QAAN,CAAe,EAAf,CAXV;AAAA;AAAA,MAWrB2D,WAXqB;AAAA,MAWRC,cAXQ;;AAc5B7D,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAM8D,CAAC;AAAA,0EAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACAhD,QAAQ,EADR;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAMN;AACA;AACIiD,gBAAAA,WARE,GAQY,KARZ;AASFC,gBAAAA,OATE,GASSC,YAAY,CAACC,OAAb,CAAqB,KAArB,CATT;AAAA;AAAA,uBAUe/D,KAAK,CAACgE,GAAN,8BAAgCF,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAhC,EAVf;;AAAA;AAUFE,gBAAAA,QAVE;AAWNL,gBAAAA,WAAW,GAAIK,QAAQ,CAACC,IAAT,CAAcC,MAAd,GAAuB,CAAtC;AACAf,gBAAAA,oBAAoB,CAACQ,WAAD,CAApB;AAZM;AAAA,uBAee5D,KAAK,CAACgE,GAAN,4BAA8BH,OAA9B,cAAyCC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAzC,EAff;;AAAA;AAeFE,gBAAAA,QAfE;;AAgBN;AACA,oBAAIA,QAAQ,CAACC,IAAT,CAAcC,MAAd,GAAuB,CAA3B,EAA8B;AAC1BnB,kBAAAA,kBAAkB,CAACiB,QAAQ,CAACC,IAAT,CAAc,CAAd,EAAiBE,WAAlB,CAAlB;AACAtB,kBAAAA,sBAAsB,CAACmB,QAAQ,CAACC,IAAT,CAAc,CAAd,EAAiBG,eAAlB,CAAtB;AACH,iBApBK,CAsBN;;;AACIC,gBAAAA,KAvBE,6BAuByBT,OAvBzB,cAuBoCC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAvBpC;AAAA;AAAA,uBAwBqB/D,KAAK,CAACgE,GAAN,CAAUM,KAAV,CAxBrB;;AAAA;AAwBAC,gBAAAA,YAxBA;AAyBNrB,gBAAAA,kBAAkB,CAACqB,YAAY,CAACL,IAAb,CAAkB,CAAlB,EAAqBM,OAAtB,CAAlB,CAzBM,CA0BN;;AA1BM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAADb,CAAC;AAAA;AAAA;AAAA,OAAP;;AA8BAA,IAAAA,CAAC;AACJ,GAhCQ,EAgCN,EAhCM,CAAT;;AAmCA,WAASc,qBAAT,CAA+BC,MAA/B,EAAuC;AACnC,QAAI,CAACvB,gBAAL,EACA,IAAIuB,MAAM,KAAK7B,mBAAf,EACIG,kBAAkB,CAAC0B,MAAD,CAAlB;AACP;;AAAA;;AAED,WAASC,yBAAT,CAAmCC,UAAnC,EAA+C;AAC3C,QAAI,CAACzB,gBAAL,EACA,IAAIyB,UAAU,KAAK7B,eAAnB,EACID,sBAAsB,CAAC8B,UAAD,CAAtB;AACP;;AAAA;;AA3D2B,WA8DbC,aA9Da;AAAA;AAAA;;AAAA;AAAA,8EA8D5B;AAAA;AAAA;AAAA;AAAA;AAAA;AACI;AACIC,cAAAA,IAFR,GAEe7B,eAAe,CAAC8B,IAAhB,CAAqB,UAAAC,CAAC;AAAA,uBAAIA,CAAC,CAACC,UAAF,KAAiBlC,eAArB;AAAA,eAAtB,CAFf;AAGQmC,cAAAA,IAHR,GAGejC,eAAe,CAAC8B,IAAhB,CAAqB,UAAAC,CAAC;AAAA,uBAAIA,CAAC,CAACC,UAAF,KAAiBpC,mBAArB;AAAA,eAAtB,CAHf;AAIQyB,cAAAA,KAJR,sCAI4CR,YAAY,CAACC,OAAb,CAAqB,KAArB,CAJ5C,cAI2ED,YAAY,CAACC,OAAb,CAAqB,KAArB,CAJ3E,cAI0Ge,IAAI,CAACK,GAJ/G,cAIsHD,IAAI,CAACC,GAJ3H,GAKI;;AALJ;AAAA,qBAMwBnF,KAAK,CAACgE,GAAN,CAAUM,KAAV,CANxB;;AAAA;AAMUc,cAAAA,IANV;;AAOI;AACA,kBAAIA,IAAI,CAACC,MAAL,KAAgB,GAApB,EAAyB;AACrB;AACA3B,gBAAAA,cAAc,CAAC,oDAAD,CAAd;AACH,eAHD,MAGO;AACP;AACGA,gBAAAA,cAAc,CAAC,8CAAD,CAAd;AACF;;AACDF,cAAAA,eAAe,CAAC,IAAD,CAAf;;AAfJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA9D4B;AAAA;AAAA;;AAkF5B,WAAS8B,0BAAT,GAAsC;AAClC,wBACA;AAAK,MAAA,KAAK,EAAC,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,WAAhB;AAA4B,MAAA,KAAK,EAAC,SAAlC;AAA4C,MAAA,IAAI,EAAC,OAAjD;AACI,MAAA,QAAQ,EAAEnC,gBADd;AAEI,MAAA,SAAS,EAAEP,OAAO,CAAC2C,MAFvB;AAE+B,MAAA,OAAO,EAAEV,aAFxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,CADA;AAQH;;AAED,WAASW,sBAAT,GAAkC;AAAA;;AAC9B,wBACA,oBAAC,KAAD;AACI,MAAA,QAAQ,EAAC,OADb;AAEI,MAAA,EAAE,EAAC,OAFP;AAGI,MAAA,IAAI,EAAC,OAHT;AAII,MAAA,gBAAgB,EAAC,SAJrB;AAKI,MAAA,SAAS,EAAE,CAAC,aAAD,EAAgB,SAAhB,EAA2B,cAA3B,CALf;AAMI,MAAA,SAAS,EAAEvC,eAAe,CAACwC,GAAhB,CAAoB,UAAAT,CAAC,EAAI;AAChC,YAAMU,GAAG,GAAG,CACRV,CAAC,CAACC,UADM,eAER,oBAAC,gBAAD;AACA,UAAA,GAAG,EAAEjE,OAAO,GAACgE,CAAC,CAACC,UADf;AAEA,UAAA,EAAE,EAAEjE,OAAO,GAACgE,CAAC,CAACC,UAFd;AAGA,UAAA,SAAS,EAAErC,OAAO,CAACvB,OAHnB;AAIA,UAAA,KAAK,EAAE2D,CAAC,CAACC,UAJT;AAKA,UAAA,OAAO,eAAE,oBAAC,KAAD;AAAO,YAAA,KAAK,EAAC,SAAb;AAAuB,YAAA,GAAG,EAAEjE,OAAO,GAACgE,CAAC,CAACC,UAAtC;AAAkD,YAAA,EAAE,EAAEjE,OAAO,GAACgE,CAAC,CAACC,UAAhE;AAA4E,YAAA,cAAc,EAAED,CAAC,CAACC,UAAF,KAAiBlC,eAA7G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YALT;AAMA,UAAA,OAAO,EAAE;AAAA,mBAAM0B,qBAAqB,CAACO,CAAC,CAACC,UAAH,CAA3B;AAAA,WANT;AAOA,UAAA,OAAO,EAAElC,eAAe,KAAKiC,CAAC,CAACC,UAP/B;AAQA,UAAA,QAAQ,EAAE9B,gBARV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFQ,eAYR,oBAAC,gBAAD;AACA,UAAA,GAAG,EAAEpC,QAAQ,GAACiE,CAAC,CAACC,UADhB;AAEA,UAAA,EAAE,EAAElE,QAAQ,GAACiE,CAAC,CAACC,UAFf;AAGA,UAAA,SAAS,EAAErC,OAAO,CAACvB,OAHnB;AAIA,UAAA,KAAK,EAAE2D,CAAC,CAACC,UAJT;AAKA,UAAA,OAAO,eAAE,oBAAC,KAAD;AAAO,YAAA,KAAK,EAAC,SAAb;AAAuB,YAAA,GAAG,EAAElE,QAAQ,GAACiE,CAAC,CAACC,UAAvC;AAAmD,YAAA,EAAE,EAAEjE,OAAO,GAACgE,CAAC,CAACC,UAAjE;AAA6E,YAAA,cAAc,EAAED,CAAC,CAACC,UAAF,KAAiBpC,mBAA9G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YALT;AAMA,UAAA,OAAO,EAAE;AAAA,mBAAM8B,yBAAyB,CAACK,CAAC,CAACC,UAAH,CAA/B;AAAA,WANT;AAOA,UAAA,OAAO,EAAEpC,mBAAmB,KAAKmC,CAAC,CAACC,UAPnC;AAQA,UAAA,QAAQ,EAAE9B,gBARV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAZQ,CAAZ;AAuBA,eAAO;AAAEe,UAAAA,IAAI,EAAEwB,GAAR;AAAaC,UAAAA,GAAG,EAAE,KAAlB;AAAyBC,UAAAA,QAAQ,EAAE;AAAnC,SAAP;AACH,OAzBU,CANf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA;AAmCH;;AAAA;;AAED,WAASC,wBAAT,GAAoC;AAChC,QAAI1C,gBAAJ,EACI,oBACI,oBAAC,UAAD;AAAY,MAAA,SAAS,EAAEP,OAAO,CAACX,KAA/B;AAAsC,MAAA,KAAK,EAAC,QAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uDADJ,CADJ,KAKI,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACP;;AAGD,MAAItB,QAAQ,EAAZ,EACI,oBACA;AAAK,IAAA,SAAS,EAAEiC,OAAO,CAACzB,IAAxB;AAA8B,IAAA,GAAG,EAAC,aAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKI,oBAAC,iBAAD;AAAmB,IAAA,UAAU,EAAC,qBAA9B;AAAoD,IAAA,SAAS,EAAE2C,YAAY,CAACC,OAAb,CAAqB,WAArB,CAA/D;AAAkG,IAAA,UAAU,EAAED,YAAY,CAACC,OAAb,CAAqB,YAArB,CAA9G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALJ,eAMI,oBAAC,wBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANJ,eAOI,oBAAC,sBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPJ,eAWI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXJ,eAYI,oBAAC,0BAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZJ,eAaI,oBAAC,aAAD;AAAe,IAAA,OAAO,EAAER,YAAxB;AAAsC,IAAA,QAAQ,EAAEC,eAAhD;AAAiE,IAAA,UAAU,EAAEC,WAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAbJ,CADA,CADJ,KAmBI,oBAAO,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AACP;;GAjKuBjB,K;UAIJvB,S;;;KAJIuB,K","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport axios from \"axios\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n// import { Switch, Route, Link } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport Table from \"components/Table/Table.js\";\r\nimport Typography from '@material-ui/core/Typography';\r\n// import TableRow from '@material-ui/core/TableRow';\r\n// import TableCell from '@material-ui/core/TableCell';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Radio from '@material-ui/core/Radio';\r\n// import Grid from \"@material-ui/core/Grid\";\r\n// import GridItem from \"components/Grid/GridItem.js\";\r\n// import Card from \"components/Card/Card.js\";\r\n// import CardBody from \"components/Card/CardBody.js\";\r\nimport { UserContext } from \"../../UserContext\";\r\nimport { NoGroup, DisplayPageHeader, MessageToUser } from 'CustomComponents/CustomComponents.js';\r\nimport { hasGroup } from 'views/functions';\r\nimport { red, blue } from '@material-ui/core/colors';\r\nimport { updateLanguageServiceSourceFile } from 'typescript';\r\nconst vcPrefix = \"vicecaptain-\"\r\nconst cPrefix = \"captain-\"\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      width: '100%',\r\n    },\r\n    captain: {\r\n        color: \"yellow\",\r\n    },     \r\n    heading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      flexBasis: '33.33%',\r\n      flexShrink: 0,\r\n    },\r\n    secondaryHeading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      color: theme.palette.text.secondary,\r\n    },\r\n    error:  {\r\n        // right: 0,\r\n        fontSize: '12px',\r\n        color: red[700],\r\n        // position: 'absolute',\r\n        alignItems: 'center',\r\n        marginTop: '0px',\r\n    },\r\n    updatemsg:  {\r\n        // right: 0,\r\n        fontSize: '12px',\r\n        color: blue[700],\r\n        // position: 'absolute',\r\n        alignItems: 'center',\r\n        marginTop: '0px',\r\n    },\r\n    hdrText:  {\r\n        // right: 0,\r\n        // fontSize: '12px',\r\n        // color: red[700],\r\n        // // position: 'absolute',\r\n        align: 'center',\r\n        marginTop: '0px',\r\n        marginBottom: '0px',\r\n    },\r\n\r\n    }));\r\n\r\n\r\n\r\nexport default function Group() {\r\n\r\n    window.onbeforeunload = () => setUser(null)\r\n    const { setUser } = useContext(UserContext);\r\n    const classes = useStyles();\r\n    const [selectedViceCaptain, SetSelectedViceCaptain] = useState(\"\");\r\n    const [selectedCaptain, SetSelectedCaptain] = useState(\"\");\r\n    const [myTeamTableData, setMyTeamTableData] = useState([]);\r\n    const [tournamentStated, setTournamentStarted] = useState(false);\r\n    const [ errorMessage, setErrorMessage ] = React.useState(\"\");\r\n    const [backDropOpen, setBackDropOpen] = React.useState(false);\r\n    const [userMessage, setUserMessage] = React.useState(\"\");\r\n\r\n      \r\n    useEffect(() => {\r\n        const a = async () => {\r\n            if  (!hasGroup()) {\r\n                // handle if not a member of any group\r\n                return;\r\n            }\r\n\r\n            // console.log(\"Calling getcaptain\")\r\n            // get start of tournamnet (i.e. start of 1st match)\r\n            var gameStarted = false;  \r\n            var mygroup  = localStorage.getItem(\"gid\")\r\n            var response = await axios.get(`/group/gamestarted/${localStorage.getItem(\"gid\")}`);\r\n            gameStarted = (response.data.length > 0);\r\n            setTournamentStarted(gameStarted);\r\n\r\n\r\n            var response = await axios.get(`/user/getcaptain/${mygroup}/${localStorage.getItem(\"uid\")}`);\r\n            // console.log(response.data[0]);\r\n            if (response.data.length > 0) {\r\n                SetSelectedCaptain(response.data[0].captainName);\r\n                SetSelectedViceCaptain(response.data[0].viceCaptainName)\r\n            }\r\n\r\n            // get list of player purchased by user for aelecting captain / vice captain\r\n            var myUrl = `/user/myteamwos/${mygroup}/${localStorage.getItem(\"uid\")}`;\r\n            const teamResponse = await axios.get(myUrl);\r\n            setMyTeamTableData(teamResponse.data[0].players);\r\n            // console.log(teamResponse.data[0].players) ;\r\n            \r\n\r\n        }\r\n        a();\r\n    }, [])\r\n\r\n   \r\n    function handleSelectedCaptain(newCap) {\r\n        if (!tournamentStated)\r\n        if (newCap !== selectedViceCaptain)\r\n            SetSelectedCaptain(newCap);\r\n    };\r\n\r\n    function handleSelectedViceCaptain(newViceCap) {\r\n        if (!tournamentStated)\r\n        if (newViceCap !== selectedCaptain)\r\n            SetSelectedViceCaptain(newViceCap);\r\n    };\r\n\r\n\r\n    async function updateCaptain() {\r\n        // console.log(\"upd captin vc details\");\r\n        var tmp1 = myTeamTableData.find(x => x.playerName === selectedCaptain);\r\n        var tmp2 = myTeamTableData.find(x => x.playerName === selectedViceCaptain);\r\n        var myUrl = `/user/captainvicecaptain/${localStorage.getItem(\"gid\")}/${localStorage.getItem(\"uid\")}/${tmp1.pid}/${tmp2.pid}`;\r\n        // console.log(myUrl);\r\n        const resp = await  axios.get(myUrl);\r\n        // console.log(resp.status)\r\n        if (resp.status === 200) {\r\n            // setErrorMessage(\"Successfully updated Captain / ViceCaptain details\");\r\n            setUserMessage(\"Successfully updated Captain / ViceCaptain details\");\r\n        } else {\r\n        //    setErrorMessage(\"Error updating Captain / ViceCaptain details\");\r\n           setUserMessage(\"Error updating Captain / ViceCaptain details\");\r\n        }\r\n        setBackDropOpen(true);\r\n    }\r\n\r\n\r\n\r\n    function DisplayCaptainSelectButton() {\r\n        return (\r\n        <div align=\"center\">\r\n        <Button variant=\"contained\" color=\"primary\" size=\"small\"\r\n            disabled={tournamentStated}\r\n            className={classes.button} onClick={updateCaptain}>Update\r\n        </Button>\r\n        </div>\r\n        );\r\n    }\r\n\r\n    function ShowCaptainViceCaptain() {\r\n        return(\r\n        <Table\r\n            tableKey=\"t-cvc\"\r\n            id=\"t-cvc\"\r\n            size=\"small\"\r\n            tableHeaderColor=\"warning\"\r\n            tableHead={[\"Player Name\", \"Captain\", \"Vice Captain\"]}\r\n            tableData={myTeamTableData.map(x => {\r\n                const arr = [\r\n                    x.playerName,\r\n                    <FormControlLabel \r\n                    key={cPrefix+x.playerName}\r\n                    id={cPrefix+x.playerName}\r\n                    className={classes.captain} \r\n                    value={x.playerName}    \r\n                    control={<Radio color=\"primary\" key={cPrefix+x.playerName} id={cPrefix+x.playerName} defaultChecked={x.playerName === selectedCaptain}/>}\r\n                    onClick={() => handleSelectedCaptain(x.playerName)}\r\n                    checked={selectedCaptain === x.playerName}\r\n                    disabled={tournamentStated}\r\n                    />,\r\n                    <FormControlLabel \r\n                    key={vcPrefix+x.playerName}\r\n                    id={vcPrefix+x.playerName}\r\n                    className={classes.captain} \r\n                    value={x.playerName}    \r\n                    control={<Radio color=\"primary\" key={vcPrefix+x.playerName} id={cPrefix+x.playerName} defaultChecked={x.playerName === selectedViceCaptain}/>}\r\n                    onClick={() => handleSelectedViceCaptain(x.playerName)}\r\n                    checked={selectedViceCaptain === x.playerName}\r\n                    disabled={tournamentStated}\r\n                    />\r\n                ]\r\n                return { data: arr, key: \"pid\", collapse: [] }\r\n            })}\r\n        />\r\n        );\r\n    };\r\n\r\n    function DisplayTournamentStarted() {\r\n        if (tournamentStated)\r\n            return (\r\n                <Typography className={classes.error} align=\"center\">(cannot update after tournament has started.)</Typography>\r\n            );\r\n        else\r\n            return(<div></div>);\r\n    }\r\n\r\n\r\n    if (hasGroup())\r\n        return (\r\n        <div className={classes.root} key=\"cpataininfo\">\r\n            {/* <h3 align=\"center\">Captain and Vice Captain ({localStorage.getItem(\"tournament\")})</h3> */}\r\n            {/* <h3 className={classes.hdrText} align=\"center\">Captain/ViceCaptain</h3> */}\r\n            {/* <Typography align=\"center\" component=\"h1\" variant=\"h5\">Captain/ViceCaptain</Typography> */}\r\n            {/* <DisplayGroupName groupName={localStorage.getItem(\"groupName\")}/> */}\r\n            <DisplayPageHeader headerName=\"Captain/ViceCaptain\" groupName={localStorage.getItem(\"groupName\")} tournament={localStorage.getItem(\"tournament\")}/>\r\n            <DisplayTournamentStarted/>\r\n            <ShowCaptainViceCaptain/>\r\n            {/* <div>\r\n                <Typography className={classes.updatemsg} align=\"left\">{errorMessage}</Typography>\r\n            </div> */}\r\n            <br/>\r\n            <DisplayCaptainSelectButton/>\r\n            <MessageToUser mtuOpen={backDropOpen} mtuClose={setBackDropOpen} mtuMessage={userMessage} />\r\n        </div>\r\n        );\r\n    else\r\n        return <NoGroup/>;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}