{"ast":null,"code":"import _regeneratorRuntime from \"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\projects\\\\Cricket\\\\akshu close\\\\IPL\\\\material-dashboard-react-master\\\\src\\\\views\\\\Group\\\\Group.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport axios from \"axios\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Switch, Route } from 'react-router-dom';\nimport Link from '@material-ui/core/Link';\nimport Button from '@material-ui/core/Button';\nimport Table from \"components/Table/Table.js\";\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Radio from '@material-ui/core/Radio';\nimport Grid from \"@material-ui/core/Grid\";\nimport GridItem from \"components/Grid/GridItem.js\";\nimport Card from \"components/Card/Card.js\";\nimport CardBody from \"components/Card/CardBody.js\"; // import Accordion from '@material-ui/core/Accordion';\n// import AccordionSummary from '@material-ui/core/AccordionSummary';\n// import AccordionDetails from '@material-ui/core/AccordionDetails';\n\nimport Typography from '@material-ui/core/Typography'; // import ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport { useHistory } from \"react-router-dom\";\nimport { UserContext } from \"../../UserContext\";\nimport GroupMember from \"views/Group/GroupMember.js\";\nimport NewGroup from \"views/Group/NewGroup.js\";\nimport GroupDetails from \"views/Group/GroupDetails.js\";\nimport { cdCurrent, cdDefault, hasGroup, getUserBalance } from \"views/functions.js\";\nimport { BlankArea, NothingToDisplay, DisplayBalance } from \"CustomComponents/CustomComponents.js\";\nimport green from '@material-ui/core/colors/green';\nimport { setTab } from \"CustomComponents/CricDreamTabs.js\";\nvar rPrefix = \"radio-\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      width: '100%'\n    },\n    symbolText: {\n      color: '#4CC417' // backgroundColor: green[700],\n\n    },\n    button: {\n      margin: theme.spacing(0, 1, 0)\n    },\n    heading: {\n      fontSize: theme.typography.pxToRem(15),\n      flexBasis: '33.33%',\n      flexShrink: 0\n    },\n    secondaryHeading: {\n      fontSize: theme.typography.pxToRem(15),\n      color: theme.palette.text.secondary\n    }\n  };\n});\nexport default function Group() {\n  _s();\n\n  // window.onbeforeunload = () => setUser(null)\n  // const { setUser } = useContext(UserContext);\n  var classes = useStyles();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      myGroupTableData = _useState2[0],\n      setMyGroupTableData = _useState2[1];\n\n  var history = useHistory();\n\n  var _useState3 = useState(localStorage.getItem(\"groupName\")),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newCurrentGroup = _useState4[0],\n      setNewCurrentGroup = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      balance = _useState6[0],\n      setBalance = _useState6[1];\n\n  useEffect(function () {\n    var a = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var myBalance, myUrl, teamResponse, setnew, tmp, myGroup;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return getUserBalance();\n\n              case 2:\n                myBalance = _context.sent;\n                setBalance(myBalance);\n                console.log(myBalance);\n                window.localStorage.setItem(\"groupMember\", \"\");\n                myUrl = \"/group/memberof/\".concat(localStorage.getItem(\"uid\"));\n                _context.next = 9;\n                return axios.get(myUrl);\n\n              case 9:\n                teamResponse = _context.sent;\n                // console.log(teamResponse.data[0].groups.length);\n                setnew = true;\n\n                if (hasGroup()) {\n                  // just check if current group is part of group list \n                  tmp = teamResponse.data[0].groups.find(function (x) {\n                    return x.gid == localStorage.getItem(\"gid\");\n                  });\n                  if (tmp) setnew = false;\n                }\n\n                if (setnew) {\n                  if (teamResponse.data[0].groups.length > 0) {\n                    myGroup = teamResponse.data[0].groups[0]; // console.log(myGroup);\n\n                    localStorage.setItem(\"gid\", myGroup.gid.toString());\n                    localStorage.setItem(\"groupName\", myGroup.name);\n                    localStorage.setItem(\"tournament\", myGroup.tournament);\n                    localStorage.setItem(\"admin\", false);\n                    setNewCurrentGroup(myGroup.name);\n                  } else {\n                    localStorage.setItem(\"gid\", \"\");\n                    localStorage.setItem(\"groupName\", \"\");\n                    localStorage.setItem(\"tournament\", \"\");\n                    localStorage.setItem(\"admin\", false);\n                    setNewCurrentGroup(\"\");\n                  }\n\n                  setMyGroupTableData(teamResponse.data[0].groups); // console.log(teamResponse.data[0].groups);\n                }\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function a() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    a();\n  }, []);\n\n  function handleGroupDetails(grpName) {\n    // console.log(`Show group details of ${grpName}`)\n    var ggg = myGroupTableData.find(function (x) {\n      return x.groupName === grpName;\n    });\n    window.localStorage.setItem(\"gdGid\", ggg.gid.toString());\n    window.localStorage.setItem(\"gdName\", ggg.groupName);\n    window.localStorage.setItem(\"gdDisplay\", ggg.displayName);\n    window.localStorage.setItem(\"gdAdmin\", ggg.admin);\n    window.localStorage.setItem(\"gdCurrent\", newCurrentGroup === ggg.groupName ? \"true\" : \"false\");\n    window.localStorage.setItem(\"gdDefault\", ggg.defaultGroup);\n    window.localStorage.setItem(\"gdTournament\", ggg.tournament); // history.push(`/admin/groupdetails`);\n\n    setTab(102);\n  }\n\n  function handleSelectGroup(grpName) {\n    // var myId;\n    var myElement;\n    myElement = document.getElementById(rPrefix + newCurrentGroup); // console.log(myElement);\n\n    myElement.checked = false;\n    setNewCurrentGroup(grpName); // set this group as default group\n\n    var ggg = myGroupTableData.find(function (x) {\n      return x.groupName === grpName;\n    });\n    window.localStorage.setItem(\"gid\", ggg.gid.toString()); // var response = await axios.get(`/group/current/` +\n    //     `${localStorage.getItem(\"gid\")}/${localStorage.getItem(\"uid\")}`);\n    // // SAMPLE OUTPUT\n    // // {\"uid\":\"8\",\"gid\":2,\"displayName\":\"Salgia Super Stars\",\n    // // \"groupName\":\"Happy Home Society Grp 2\",\"tournament\":\"ENGAUST20\",\"ismember\":true,\"admin\":true}\n    // // window.localStorage.setItem(\"uid\", myUID)\n\n    window.localStorage.setItem(\"displayName\", ggg.displayName);\n    window.localStorage.setItem(\"groupName\", ggg.groupName);\n    window.localStorage.setItem(\"tournament\", ggg.tournament);\n    window.localStorage.setItem(\"admin\", ggg.admin); // setUser({ uid: localStorage.getItem(\"uid\"), admin: ggg.admin })    \n  }\n\n  ;\n  /*\r\n  function ShowGroupMembers() {\r\n      var grpName = localStorage.getItem(\"groupName\");\r\n      var ggg = myGroupTableData.find(x=> x.groupName === grpName);\r\n      console.log(ggg);\r\n      window.localStorage.setItem(\"gdGid\", ggg.gid.toString());\r\n      window.localStorage.setItem(\"gdName\", ggg.groupName)\r\n      window.localStorage.setItem(\"gdAdmin\", ggg.admin);\r\n      // console.log(\"abou to call /admin/membergroup \")\r\n      //history.push(\"/admin/membergroup\");        \r\n  };\r\n    function EditGroupProfile() {\r\n      console.log(\"edit profile\")\r\n  }   \r\n  \r\n  */\n\n  function handleNewGroup() {\n    // history.push(\"/admin/newgroup\");        \n    setTab(101);\n  }\n\n  ;\n\n  function handleJoinGroup() {\n    // history.push(\"/admin/newgroup\");        \n    setTab(105);\n  }\n\n  ;\n\n  function ShowAllGroups() {\n    var _this = this;\n\n    return /*#__PURE__*/React.createElement(Grid, {\n      key: \"gr-group\",\n      container: true,\n      justify: \"center\",\n      alignItems: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(GridItem, {\n      key: \"gi-group\",\n      xs: 12,\n      sm: 12,\n      md: 12,\n      lg: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      key: \"c-group\",\n      profile: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CardBody, {\n      key: \"cb-group\",\n      profile: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      tableKey: \"t-group\",\n      id: \"t-group\",\n      tableHeaderColor: \"warning\",\n      tableHead: [\"Group Name\", \"\", \"Admin\"],\n      tableData: myGroupTableData.map(function (x) {\n        var myName = x.groupName;\n        var currentChar = \"\";\n        if (newCurrentGroup === x.groupName) currentChar = cdCurrent();\n        if (x.defaultGroup) currentChar = currentChar + cdDefault(); // console.log(x);\n\n        var arr = [/*#__PURE__*/React.createElement(Link, {\n          href: \"#\",\n          onClick: function onClick() {\n            return handleGroupDetails(x.groupName);\n          },\n          variant: \"body2\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(Typography, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 37\n          }\n        }, myName)), /*#__PURE__*/React.createElement(Typography, {\n          className: classes.symbolText,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 37\n          }\n        }, currentChar), /*#__PURE__*/React.createElement(Typography, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 37\n          }\n        }, x.admin ? \"Admin\" : \"\") // <Link href=\"#\" onClick={() => handleGroupDetails(x.groupName)} variant=\"body2\">\n        // Details\n        // </Link>\n        // <FormControlLabel \n        // key={\"fc-\"+x.groupName}\n        // className={classes.groupName} \n        // value={x.groupName}    \n        // control={<Radio color=\"primary\" key={rPrefix+x.groupName} id={rPrefix+x.groupName} defaultChecked={x.groupName === newCurrentGroup}/>}\n        // onClick={() => handleSelectGroup(x.groupName)}\n        // />\n        ];\n        return {\n          data: arr,\n          collapse: []\n        };\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }\n    })))));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    align: \"center\",\n    key: \"groupinfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DisplayBalance, {\n    balance: balance,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }\n  }, \"My Groups\"), /*#__PURE__*/React.createElement(ShowAllGroups, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    key: \"create\",\n    variant: \"contained\",\n    color: \"primary\",\n    size: \"small\",\n    className: classes.button,\n    onClick: handleNewGroup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }\n  }, \"New Group\"), /*#__PURE__*/React.createElement(Button, {\n    key: \"progile\",\n    variant: \"contained\",\n    color: \"primary\",\n    size: \"small\",\n    className: classes.button,\n    onClick: handleJoinGroup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }\n  }, \"Join Group\"));\n}\n\n_s(Group, \"ZoEnTuZPNe4QziPTpRPdpJdcNe4=\", false, function () {\n  return [useStyles, useHistory];\n});\n\n_c = Group;\n\nvar _c;\n\n$RefreshReg$(_c, \"Group\");","map":{"version":3,"sources":["D:/projects/Cricket/akshu close/IPL/material-dashboard-react-master/src/views/Group/Group.js"],"names":["React","useEffect","useState","useContext","axios","makeStyles","Switch","Route","Link","Button","Table","FormControlLabel","Radio","Grid","GridItem","Card","CardBody","Typography","useHistory","UserContext","GroupMember","NewGroup","GroupDetails","cdCurrent","cdDefault","hasGroup","getUserBalance","BlankArea","NothingToDisplay","DisplayBalance","green","setTab","rPrefix","useStyles","theme","root","width","symbolText","color","button","margin","spacing","heading","fontSize","typography","pxToRem","flexBasis","flexShrink","secondaryHeading","palette","text","secondary","Group","classes","myGroupTableData","setMyGroupTableData","history","localStorage","getItem","newCurrentGroup","setNewCurrentGroup","balance","setBalance","a","myBalance","console","log","window","setItem","myUrl","get","teamResponse","setnew","tmp","data","groups","find","x","gid","length","myGroup","toString","name","tournament","handleGroupDetails","grpName","ggg","groupName","displayName","admin","defaultGroup","handleSelectGroup","myElement","document","getElementById","checked","handleNewGroup","handleJoinGroup","ShowAllGroups","map","myName","currentChar","arr","collapse"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport axios from \"axios\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport Link from '@material-ui/core/Link';\r\nimport Button from '@material-ui/core/Button';\r\nimport Table from \"components/Table/Table.js\";\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport GridItem from \"components/Grid/GridItem.js\";\r\nimport Card from \"components/Card/Card.js\";\r\nimport CardBody from \"components/Card/CardBody.js\";\r\n// import Accordion from '@material-ui/core/Accordion';\r\n// import AccordionSummary from '@material-ui/core/AccordionSummary';\r\n// import AccordionDetails from '@material-ui/core/AccordionDetails';\r\nimport Typography from '@material-ui/core/Typography';\r\n// import ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { UserContext } from \"../../UserContext\";\r\nimport GroupMember from \"views/Group/GroupMember.js\"\r\nimport NewGroup from \"views/Group/NewGroup.js\"\r\nimport GroupDetails from \"views/Group/GroupDetails.js\"\r\nimport { cdCurrent, cdDefault, hasGroup, getUserBalance} from \"views/functions.js\"\r\nimport {BlankArea, NothingToDisplay, DisplayBalance} from \"CustomComponents/CustomComponents.js\"\r\nimport green from '@material-ui/core/colors/green';\r\nimport {setTab} from \"CustomComponents/CricDreamTabs.js\"\r\nconst rPrefix = \"radio-\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      width: '100%',\r\n    },\r\n    symbolText: {\r\n        color: '#4CC417',\r\n        // backgroundColor: green[700],\r\n    },\r\n    button: {\r\n        margin: theme.spacing(0, 1, 0),\r\n      },\r\n        heading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      flexBasis: '33.33%',\r\n      flexShrink: 0,\r\n    },\r\n    secondaryHeading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      color: theme.palette.text.secondary,\r\n    },\r\n  }));\r\n\r\n\r\nexport default function Group() {\r\n\r\n    // window.onbeforeunload = () => setUser(null)\r\n    // const { setUser } = useContext(UserContext);\r\n    const classes = useStyles();\r\n    const [myGroupTableData, setMyGroupTableData] = useState([]);\r\n    const history = useHistory();\r\n    const [newCurrentGroup, setNewCurrentGroup] = useState(localStorage.getItem(\"groupName\"));\r\n    const [balance, setBalance] = useState(0);\r\n\r\n      \r\n    useEffect(() => {\r\n        const a = async () => {\r\n            let myBalance = await getUserBalance();\r\n            setBalance(myBalance);\r\n            console.log(myBalance); \r\n\r\n            window.localStorage.setItem(\"groupMember\", \"\");\r\n            var myUrl = `/group/memberof/${localStorage.getItem(\"uid\")}`;\r\n            const teamResponse = await axios.get(myUrl);\r\n            // console.log(teamResponse.data[0].groups.length);\r\n            let setnew = true;\r\n            if (hasGroup()) {\r\n                // just check if current group is part of group list \r\n                let tmp = teamResponse.data[0].groups.find(x => x.gid == localStorage.getItem(\"gid\"));\r\n                if (tmp) setnew = false;\r\n            }\r\n\r\n            if (setnew) {\r\n                if (teamResponse.data[0].groups.length > 0) {\r\n                    var myGroup = teamResponse.data[0].groups[0];\r\n                    // console.log(myGroup);\r\n                    localStorage.setItem(\"gid\", myGroup.gid.toString());\r\n                    localStorage.setItem(\"groupName\", myGroup.name);\r\n                    localStorage.setItem(\"tournament\", myGroup.tournament);\r\n                    localStorage.setItem(\"admin\", false)\r\n                    setNewCurrentGroup(myGroup.name);\r\n                } else {\r\n                    localStorage.setItem(\"gid\", \"\");\r\n                    localStorage.setItem(\"groupName\", \"\");\r\n                    localStorage.setItem(\"tournament\", \"\");\r\n                    localStorage.setItem(\"admin\", false)\r\n                    setNewCurrentGroup(\"\");\r\n                }\r\n                setMyGroupTableData(teamResponse.data[0].groups);\r\n                // console.log(teamResponse.data[0].groups);\r\n            }\r\n        }\r\n        a();\r\n    }, [])\r\n\r\n\r\n    function handleGroupDetails(grpName) {\r\n        // console.log(`Show group details of ${grpName}`)\r\n        var ggg = myGroupTableData.find(x => x.groupName === grpName);\r\n        window.localStorage.setItem(\"gdGid\", ggg.gid.toString());\r\n        window.localStorage.setItem(\"gdName\", ggg.groupName)\r\n        window.localStorage.setItem(\"gdDisplay\", ggg.displayName)\r\n        window.localStorage.setItem(\"gdAdmin\", ggg.admin);\r\n        window.localStorage.setItem(\"gdCurrent\", (newCurrentGroup === ggg.groupName) ? \"true\" : \"false\");\r\n        window.localStorage.setItem(\"gdDefault\", ggg.defaultGroup);\r\n        window.localStorage.setItem(\"gdTournament\", ggg.tournament);\r\n        // history.push(`/admin/groupdetails`);\r\n        setTab(102);\r\n    }\r\n\r\n    function handleSelectGroup(grpName) {\r\n        // var myId;\r\n        var myElement;\r\n        myElement = document.getElementById(rPrefix + newCurrentGroup);\r\n        // console.log(myElement);\r\n        myElement.checked = false;\r\n        setNewCurrentGroup(grpName);\r\n\r\n        // set this group as default group\r\n        var ggg = myGroupTableData.find(x => x.groupName === grpName);\r\n        window.localStorage.setItem(\"gid\", ggg.gid.toString());\r\n        // var response = await axios.get(`/group/current/` +\r\n        //     `${localStorage.getItem(\"gid\")}/${localStorage.getItem(\"uid\")}`);\r\n        // // SAMPLE OUTPUT\r\n        // // {\"uid\":\"8\",\"gid\":2,\"displayName\":\"Salgia Super Stars\",\r\n        // // \"groupName\":\"Happy Home Society Grp 2\",\"tournament\":\"ENGAUST20\",\"ismember\":true,\"admin\":true}\r\n        // // window.localStorage.setItem(\"uid\", myUID)\r\n        window.localStorage.setItem(\"displayName\", ggg.displayName);\r\n        window.localStorage.setItem(\"groupName\", ggg.groupName);\r\n        window.localStorage.setItem(\"tournament\", ggg.tournament);\r\n        window.localStorage.setItem(\"admin\", ggg.admin)\r\n        // setUser({ uid: localStorage.getItem(\"uid\"), admin: ggg.admin })    \r\n    };\r\n\r\n    /*\r\n    function ShowGroupMembers() {\r\n        var grpName = localStorage.getItem(\"groupName\");\r\n        var ggg = myGroupTableData.find(x=> x.groupName === grpName);\r\n        console.log(ggg);\r\n        window.localStorage.setItem(\"gdGid\", ggg.gid.toString());\r\n        window.localStorage.setItem(\"gdName\", ggg.groupName)\r\n        window.localStorage.setItem(\"gdAdmin\", ggg.admin);\r\n        // console.log(\"abou to call /admin/membergroup \")\r\n        //history.push(\"/admin/membergroup\");        \r\n    };\r\n\r\n    function EditGroupProfile() {\r\n        console.log(\"edit profile\")\r\n    }   \r\n    \r\n    */\r\n\r\n    function handleNewGroup() {\r\n        // history.push(\"/admin/newgroup\");        \r\n        setTab(101);\r\n    };\r\n\r\n    function handleJoinGroup() {\r\n        // history.push(\"/admin/newgroup\");        \r\n        setTab(105);\r\n    };\r\n\r\n\r\n    function  ShowAllGroups() {\r\n        return(\r\n            <Grid key=\"gr-group\" container justify=\"center\" alignItems=\"center\" >\r\n            <GridItem key=\"gi-group\" xs={12} sm={12} md={12} lg={12} >\r\n                <Card key=\"c-group\" profile>\r\n                    <CardBody key=\"cb-group\" profile>\r\n                        <Table\r\n                            tableKey=\"t-group\"\r\n                            id=\"t-group\"\r\n                            tableHeaderColor=\"warning\"\r\n                            tableHead={[\"Group Name\",\"\", \"Admin\"]}\r\n                            tableData={myGroupTableData.map(x => {\r\n                                var myName = x.groupName;\r\n                                var currentChar = \"\";\r\n                                if (newCurrentGroup === x.groupName) currentChar = cdCurrent();\r\n                                if (x.defaultGroup) currentChar =  currentChar + cdDefault();\r\n                                // console.log(x);\r\n                                const arr = [\r\n                                    <Link href=\"#\" onClick={() => handleGroupDetails(x.groupName)} variant=\"body2\">\r\n                                    <Typography>{myName}</Typography>\r\n                                    </Link>,\r\n                                    <Typography className={classes.symbolText}>{currentChar}</Typography>,\r\n                                    <Typography>{((x.admin) ? \"Admin\" : \"\")}</Typography>\r\n                                    // <Link href=\"#\" onClick={() => handleGroupDetails(x.groupName)} variant=\"body2\">\r\n                                    // Details\r\n                                    // </Link>\r\n                                    // <FormControlLabel \r\n                                    // key={\"fc-\"+x.groupName}\r\n                                    // className={classes.groupName} \r\n                                    // value={x.groupName}    \r\n                                    // control={<Radio color=\"primary\" key={rPrefix+x.groupName} id={rPrefix+x.groupName} defaultChecked={x.groupName === newCurrentGroup}/>}\r\n                                    // onClick={() => handleSelectGroup(x.groupName)}\r\n                                    // />\r\n                                ]\r\n                                return { data: arr, collapse: [] }\r\n                            })}\r\n                        />\r\n                    </CardBody>\r\n                </Card>\r\n            </GridItem>\r\n            </Grid>\r\n        );\r\n    }\r\n\r\n\r\n    return (\r\n        <div className={classes.root} align=\"center\" key=\"groupinfo\">\r\n            <DisplayBalance balance={balance} />\r\n            <h3 align=\"center\">My Groups</h3>\r\n            <ShowAllGroups/>\r\n            <Button key={\"create\"} variant=\"contained\" color=\"primary\" size=\"small\"\r\n                className={classes.button} onClick={handleNewGroup}>New Group\r\n            </Button>\r\n            <Button key={\"progile\"} variant=\"contained\" color=\"primary\" size=\"small\"\r\n               className={classes.button} onClick={handleJoinGroup}>Join Group\r\n            </Button>\r\n        </div>\r\n        );\r\n    \r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}